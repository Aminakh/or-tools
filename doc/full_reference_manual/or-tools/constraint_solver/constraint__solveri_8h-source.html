<!-- Good morning, Mr. Phelps. -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>or-tools/constraint_solver/constraint_solveri.h Source File - Doxy</title>
    <link rel="shortcut icon" href="../../favicon.ico">
    <!-- Both stylesheets are supplied by Doxygen, with maybe minor tweaks from Google. -->
    <link href="../../doxygen.css" rel="stylesheet" type="text/css">
    <link href="../../tabs.css" rel="stylesheet" type="text/css">
  </head>

  <body topmargin=0 leftmargin=20 bottommargin=0 rightmargin=20 marginwidth=20 marginheight=0>
  <!-- Second part of the secret behind Doxy logo always having the word "Doxy" with the color of the day. -->
  <style>
    a.doxy_logo:hover {
      background-color: #389613
    }
  </style>

  <table width=100% cellpadding=0 cellspacing=0 border=0>
    <!-- Top horizontal line with the color of the day. -->
    <tr valign=top>
      <td colspan=3 bgcolor=#389613 height=3></td>
    </tr>

    <!-- Header row with the links at the right. -->
    <tr valign=top>
      <td colspan=3 align=right>
        <font size=-1>
          Generated on: <font color=#389613><b>Fri Apr  1 14:13:18 PDT 2011</b></font>
            for <b>custom file set</b>
        </font>
      </td>
    </tr>

    <!-- Header row with the logo and the search form. -->
    <tr valign=top>
      <!-- Logo. -->
      <td align=left width=150>
        <table width=150 height=54 cellpadding=0 cellspacing=0 border=0>
          <tr valign=top>
            <!-- First part of the secret behind Doxy logo always having the word "Doxy" with the color of the day. -->
            <td bgcolor=#389613>
              <a class="doxy_logo" href="../../index.html"><img src="../../doxy_logo.png" alt="Doxy" border=0></a>
            </td>
          </tr>
        </table>
      </td>
    </tr>

    <!-- Tiny vertical space below the form. -->
    <tr valign=top>
      <td colspan=3 height=3></td>
    </tr>
  </table>

  <!-- Header navigation row. -->
  <div class="memproto">
    <table width=100% cellpadding=0 cellspacing=0 border=0>
      <tr>
        <td align=left style="padding-left: 20px"><font size=+1><b><tt><font color=#333333>//
            <a href="../../index.html"><font color=#389613>doxy</font></a>/</font>
            <a href="../../or-tools/index.html">or-tools</a>/
            <a href="../../or-tools/constraint_solver/index.html">constraint_solver</a>/
            </tt></b></font>
        </td>
      </tr>
    </table>
  </div>
  <br />
    <!-- No subdirs found. -->
  <!-- End of header. -->
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>or-tools/constraint_solver/constraint_solveri.h</h1><a href="constraint__solveri_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright 2010 Google</span>
<a name="l00002"></a>00002 <span class="comment">// Licensed under the Apache License, Version 2.0 (the "License");</span>
<a name="l00003"></a>00003 <span class="comment">// you may not use this file except in compliance with the License.</span>
<a name="l00004"></a>00004 <span class="comment">// You may obtain a copy of the License at</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00009"></a>00009 <span class="comment">// distributed under the License is distributed on an "AS IS" BASIS,</span>
<a name="l00010"></a>00010 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00011"></a>00011 <span class="comment">// See the License for the specific language governing permissions and</span>
<a name="l00012"></a>00012 <span class="comment">// limitations under the License.</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#ifndef CONSTRAINT_SOLVER_CONSTRAINT_SOLVERI_H_</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define CONSTRAINT_SOLVER_CONSTRAINT_SOLVERI_H_</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include "base/callback-types.h"</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "base/commandlineflags.h"</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include "base/integral_types.h"</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include "base/logging.h"</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include "base/scoped_ptr.h"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include "base/sysinfo.h"</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include "base/timer.h"</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include "base/join.h"</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include "base/bitmap.h"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "base/map-util.h"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="constraint__solver_8h.html">constraint_solver/constraint_solver.h</a>"</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="keyword">class </span>WallTimer;
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="keyword">namespace </span>operations_research {
<a name="l00037"></a>00037 <span class="comment">// This is the base class for all non-variable expressions.</span>
<a name="l00038"></a>00038 <span class="comment">// It proposes a basic 'cast-to-var' implementation.</span>
<a name="l00039"></a>00039 
<a name="l00040"></a><a class="code" href="classoperations__research_1_1BaseIntExpr.html">00040</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1BaseIntExpr.html" title="This is the base class for all non-variable expressions.">BaseIntExpr</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a> {
<a name="l00041"></a>00041  <span class="keyword">public</span>:
<a name="l00042"></a><a class="code" href="classoperations__research_1_1BaseIntExpr.html#d7d12cdfcb4b9340db0ea792b5545419">00042</a>   <span class="keyword">explicit</span> <a class="code" href="classoperations__research_1_1BaseIntExpr.html#d7d12cdfcb4b9340db0ea792b5545419">BaseIntExpr</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) : <a class="code" href="classoperations__research_1_1IntExpr.html" title="The class IntExpr is the base of all integer expressions in constraint programming...">IntExpr</a>(s), <a class="code" href="classoperations__research_1_1BaseIntExpr.html#cc22ed642ed7e5587e3a57bd95fdd90c">var_</a>(NULL) {}
<a name="l00043"></a><a class="code" href="classoperations__research_1_1BaseIntExpr.html#50d277c9f765af939b7534bfeb685dd4">00043</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1BaseIntExpr.html#50d277c9f765af939b7534bfeb685dd4">~BaseIntExpr</a>() {}
<a name="l00044"></a>00044 
<a name="l00045"></a>00045   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <a class="code" href="classoperations__research_1_1BaseIntExpr.html#bc0b1cac77e1e4aac41bb6f95b441349" title="Creates a variable from the expression.">Var</a>();
<a name="l00046"></a>00046   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <a class="code" href="classoperations__research_1_1BaseIntExpr.html#1d4d6a63140435221e0dfcaf913d6ffb">CastToVar</a>();
<a name="l00047"></a>00047   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1BaseIntExpr.html#df31ce654e47f0a049a4a17db94631b5">AddDelegateName</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix,
<a name="l00048"></a>00048                        <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1PropagationBaseObject.html" title="The PropagationBaseObject is a subclass of BaseObject that is also friend to the...">PropagationBaseObject</a>* delegate) <span class="keyword">const</span>;
<a name="l00049"></a>00049  <span class="keyword">private</span>:
<a name="l00050"></a><a class="code" href="classoperations__research_1_1BaseIntExpr.html#cc22ed642ed7e5587e3a57bd95fdd90c">00050</a>   <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <a class="code" href="classoperations__research_1_1BaseIntExpr.html#cc22ed642ed7e5587e3a57bd95fdd90c">var_</a>;
<a name="l00051"></a>00051 };
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="comment">// ----- utility classes -----</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">// This class represent a reversible FIFO structure.</span>
<a name="l00056"></a>00056 <span class="comment">// The main diffence w.r.t a standart FIFO structure is that a Solver is</span>
<a name="l00057"></a>00057 <span class="comment">// given as parameter to the modifiers such that the solver can store the</span>
<a name="l00058"></a>00058 <span class="comment">// backtrack information</span>
<a name="l00059"></a>00059 <span class="comment">// Iterator's traversing order should not be changed, as some algorithm</span>
<a name="l00060"></a>00060 <span class="comment">// depend on it to be .</span>
<a name="l00061"></a>00061 <span class="preprocessor">#ifndef SWIG</span>
<a name="l00062"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html">00062</a> <span class="preprocessor"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html" title="utility classes">SimpleRevFIFO</a> {
<a name="l00063"></a>00063  <span class="keyword">private</span>:
<a name="l00064"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#a0dfc8118e65591b700d6b5949da0480bf0ada1d3a37a44af22dfb6531585e3a">00064</a>   <span class="keyword">enum</span> { <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#a0dfc8118e65591b700d6b5949da0480bf0ada1d3a37a44af22dfb6531585e3a">CHUNK_SIZE</a> = 16 };  <span class="comment">// TODO(user): could be an extra template param</span>
<a name="l00065"></a><a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html">00065</a>   <span class="keyword">struct </span><a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html">Chunk</a> {
<a name="l00066"></a><a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">00066</a>     T <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a>[<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#a0dfc8118e65591b700d6b5949da0480bf0ada1d3a37a44af22dfb6531585e3a">CHUNK_SIZE</a>];
<a name="l00067"></a><a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#0c6477d489dda2772ab23a2deaaa50df">00067</a>     <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html">Chunk</a>* <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#0c6477d489dda2772ab23a2deaaa50df">next_</a>;
<a name="l00068"></a><a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#9becafe677457479d86618725a82b31b">00068</a>     <span class="keyword">explicit</span> <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#9becafe677457479d86618725a82b31b">Chunk</a>(<span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html">Chunk</a>* next) : <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#0c6477d489dda2772ab23a2deaaa50df">next_</a>(next) {}
<a name="l00069"></a>00069   };
<a name="l00070"></a>00070 
<a name="l00071"></a>00071  <span class="keyword">public</span>:
<a name="l00072"></a>00072   <span class="comment">// This iterator is non stable w.r.t. deletion.</span>
<a name="l00073"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html">00073</a>   <span class="keyword">class </span><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html" title="This iterator is non stable w.r.t. deletion.">Iterator</a> {
<a name="l00074"></a>00074    <span class="keyword">public</span>:
<a name="l00075"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#542b5ed50647b660b9d87debcfaf5380">00075</a>     <span class="keyword">explicit</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#542b5ed50647b660b9d87debcfaf5380">Iterator</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html" title="utility classes">SimpleRevFIFO&lt;T&gt;</a>* l)
<a name="l00076"></a>00076         : <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a>(l-&gt;<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>), <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a>(l-&gt;<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#1da6487f719f88938d702348446190e6">Last</a>()) {}
<a name="l00077"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#46f7bbff178877d3e92fa8908105d370">00077</a>     <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#46f7bbff178877d3e92fa8908105d370">ok</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a> != NULL); }
<a name="l00078"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#c4cc38058b6ec67a52d14f9f4989adda">00078</a>     T <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#c4cc38058b6ec67a52d14f9f4989adda">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a>; }
<a name="l00079"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#39b457178436af1a0baf7bdda6c75c10">00079</a>     <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#39b457178436af1a0baf7bdda6c75c10">operator++</a>() {
<a name="l00080"></a>00080       ++<a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a>;
<a name="l00081"></a>00081       <span class="keywordflow">if</span> (<a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a> == <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a> + <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#a0dfc8118e65591b700d6b5949da0480bf0ada1d3a37a44af22dfb6531585e3a">CHUNK_SIZE</a>) {
<a name="l00082"></a>00082         <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a> = <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#0c6477d489dda2772ab23a2deaaa50df">next_</a>;
<a name="l00083"></a>00083         <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a> = <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a> ? <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a> : NULL;
<a name="l00084"></a>00084       }
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087    <span class="keyword">private</span>:
<a name="l00088"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">00088</a>     <span class="keyword">const</span> <a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html">Chunk</a>* <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#566bc29f6786b8cae6536335a1429cd9">chunk_</a>;
<a name="l00089"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">00089</a>     <span class="keyword">const</span> T* <a class="code" href="classoperations__research_1_1SimpleRevFIFO_1_1Iterator.html#cd004ef7a9a3d449de23b25d653893f8">data_</a>;
<a name="l00090"></a>00090   };
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#fe165ef59bdd847273347b78397eed2d">00092</a>   <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#fe165ef59bdd847273347b78397eed2d">SimpleRevFIFO</a>() : <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>(NULL), <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>(0) {}
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#4f48d3ad864fe70677b0e3aa3e2d79e8">00094</a>   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#4f48d3ad864fe70677b0e3aa3e2d79e8">Push</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s, T val) {
<a name="l00095"></a>00095     <span class="keywordflow">if</span> (<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a> == 0) {
<a name="l00096"></a>00096       Chunk* <span class="keyword">const</span> chunk = s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#33e4733225dee453b75d83c991194286">UnsafeRevAlloc</a>(<span class="keyword">new</span> Chunk(<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>));
<a name="l00097"></a>00097       s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#fca376d8b0abd52b94534112442f1614" title="All-in-one SaveAndSetValue.">SaveAndSetValue</a>(reinterpret_cast&lt;void**&gt;(&amp;<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>),
<a name="l00098"></a>00098                          reinterpret_cast&lt;void*&gt;(chunk));
<a name="l00099"></a>00099       s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#fca376d8b0abd52b94534112442f1614" title="All-in-one SaveAndSetValue.">SaveAndSetValue</a>(&amp;<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>, <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#a0dfc8118e65591b700d6b5949da0480bf0ada1d3a37a44af22dfb6531585e3a">CHUNK_SIZE</a> - 1);
<a name="l00100"></a>00100     } <span class="keywordflow">else</span> {
<a name="l00101"></a>00101       s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#cf35e0062ce89a8fdf5c1762c5baebfe" title="All-in-one SaveAndAdd_value.">SaveAndAdd</a>(&amp;<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>, -1);
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103     <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a>[<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>] = val;
<a name="l00104"></a>00104   }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#8a687b3e2756711e361d82db748ed33b">00106</a>   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#8a687b3e2756711e361d82db748ed33b">PushIfNotTop</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s, T val) {
<a name="l00107"></a>00107     <span class="keywordflow">if</span> (<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a> == NULL || <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#7624aa6d7a7cf5b6d1e85a0c3e316d6e">LastValue</a>() != val) {
<a name="l00108"></a>00108       <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#4f48d3ad864fe70677b0e3aa3e2d79e8">Push</a>(s, val);
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110   }
<a name="l00111"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#1da6487f719f88938d702348446190e6">00111</a>   <span class="keyword">const</span> T* <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#1da6487f719f88938d702348446190e6">Last</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a> ? &amp;<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a>[<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>] : NULL; }
<a name="l00112"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#7624aa6d7a7cf5b6d1e85a0c3e316d6e">00112</a>   <span class="keyword">const</span> T&amp; <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#7624aa6d7a7cf5b6d1e85a0c3e316d6e">LastValue</a>()<span class="keyword"> const </span>{
<a name="l00113"></a>00113     DCHECK(<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>);
<a name="l00114"></a>00114     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a>[<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>];
<a name="l00115"></a>00115   }
<a name="l00116"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#1cd3644228ae5a0f0ec3862d91276470">00116</a>   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#1cd3644228ae5a0f0ec3862d91276470">SetLastValue</a>(<span class="keyword">const</span> T&amp; v) {
<a name="l00117"></a>00117     DCHECK(<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#1da6487f719f88938d702348446190e6">Last</a>());
<a name="l00118"></a>00118     <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>-&gt;<a class="code" href="structoperations__research_1_1SimpleRevFIFO_1_1Chunk.html#a8903e41274cb967785a14c1b082ef66">data_</a>[<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>] = v;
<a name="l00119"></a>00119   }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121  <span class="keyword">private</span>:
<a name="l00122"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">00122</a>   Chunk *<a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#da4a26067f1db4294df7b584d1d4cf7a">chunks_</a>;
<a name="l00123"></a><a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">00123</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SimpleRevFIFO.html#c8123f29ba8283b77dad822f516adbc0">pos_</a>;
<a name="l00124"></a>00124 };
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="comment">// These methods represents generic demons that will call back a</span>
<a name="l00127"></a>00127 <span class="comment">// method on the constraint during their Run method.</span>
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 <span class="comment">// ----- Call one method with no param -----</span>
<a name="l00130"></a><a class="code" href="classoperations__research_1_1CallMethod0.html">00130</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1CallMethod0.html" title="These methods represents generic demons that will call back a method on the constraint...">CallMethod0</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a> {
<a name="l00131"></a>00131  <span class="keyword">public</span>:
<a name="l00132"></a><a class="code" href="classoperations__research_1_1CallMethod0.html#2ff2a02eb49bf2fdd637eef770a67289">00132</a>   <a class="code" href="classoperations__research_1_1CallMethod0.html#2ff2a02eb49bf2fdd637eef770a67289">CallMethod0</a>(T* <span class="keyword">const</span> ct, <span class="keywordtype">void</span> (T::*method)(), <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name)
<a name="l00133"></a>00133       : <a class="code" href="classoperations__research_1_1CallMethod0.html#e4b8237218660ff06148feefc4813a8d">constraint_</a>(ct), <a class="code" href="classoperations__research_1_1CallMethod0.html#1805949b596ed6dc36eaa30b46c5b64c">method_</a>(method), <a class="code" href="classoperations__research_1_1CallMethod0.html#46c34bfcd53e41b05358117dae363a49">name_</a>(name) {}
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="classoperations__research_1_1CallMethod0.html#298ad21fb0246c26c0a3b9c903ee1476">00135</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1CallMethod0.html#298ad21fb0246c26c0a3b9c903ee1476">~CallMethod0</a>() {}
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="classoperations__research_1_1CallMethod0.html#8bb9fe5351ccf4279e1d56cc6846328a">00137</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1CallMethod0.html#8bb9fe5351ccf4279e1d56cc6846328a" title="This is the main callback of the demon.">Run</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00138"></a>00138     (<a class="code" href="classoperations__research_1_1CallMethod0.html#e4b8237218660ff06148feefc4813a8d">constraint_</a>-&gt;*<a class="code" href="classoperations__research_1_1CallMethod0.html#1805949b596ed6dc36eaa30b46c5b64c">method_</a>)();
<a name="l00139"></a>00139   }
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="classoperations__research_1_1CallMethod0.html#e5d39f65c0b387daac05de80c40c78da">00141</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1CallMethod0.html#e5d39f65c0b387daac05de80c40c78da">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00142"></a>00142     <span class="keywordflow">return</span> <span class="stringliteral">"CallMethod_"</span> + <a class="code" href="classoperations__research_1_1CallMethod0.html#46c34bfcd53e41b05358117dae363a49">name_</a> + <span class="stringliteral">"("</span> + <a class="code" href="classoperations__research_1_1CallMethod0.html#e4b8237218660ff06148feefc4813a8d">constraint_</a>-&gt;DebugString() + <span class="stringliteral">")"</span>;
<a name="l00143"></a>00143   }
<a name="l00144"></a>00144 
<a name="l00145"></a>00145  <span class="keyword">private</span>:
<a name="l00146"></a><a class="code" href="classoperations__research_1_1CallMethod0.html#e4b8237218660ff06148feefc4813a8d">00146</a>   T* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1CallMethod0.html#e4b8237218660ff06148feefc4813a8d">constraint_</a>;
<a name="l00147"></a>00147   void (T::* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1CallMethod0.html#1805949b596ed6dc36eaa30b46c5b64c">method_</a>)();
<a name="l00148"></a><a class="code" href="classoperations__research_1_1CallMethod0.html#46c34bfcd53e41b05358117dae363a49">00148</a>   <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1CallMethod0.html#46c34bfcd53e41b05358117dae363a49">name_</a>;
<a name="l00149"></a>00149 };
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="namespaceoperations__research.html#50b3d41d8dbf72bb2ad22235a9e1f53e">00151</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <a class="code" href="namespaceoperations__research.html#50b3d41d8dbf72bb2ad22235a9e1f53e">MakeConstraintDemon0</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00152"></a>00152                                                T* <span class="keyword">const</span> ct,
<a name="l00153"></a>00153                                                <span class="keywordtype">void</span> (T::*method)(),
<a name="l00154"></a>00154                                                <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {
<a name="l00155"></a>00155   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#83ceb54f811483fd1c0444cddba8a600" title="The RevAlloc method stores the corresponding object in a stack.">RevAlloc</a>(<span class="keyword">new</span> <a class="code" href="classoperations__research_1_1CallMethod0.html" title="These methods represents generic demons that will call back a method on the constraint...">CallMethod0&lt;T&gt;</a>(ct, method, name));
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <span class="comment">// ----- Call one method with one param -----</span>
<a name="l00159"></a><a class="code" href="classoperations__research_1_1CallMethod1.html">00159</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1CallMethod1.html" title="Call one method with one param.">CallMethod1</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a> {
<a name="l00160"></a>00160  <span class="keyword">public</span>:
<a name="l00161"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#b1d047192a93d680c89049fce9ee3deb">00161</a>   <a class="code" href="classoperations__research_1_1CallMethod1.html#b1d047192a93d680c89049fce9ee3deb">CallMethod1</a>(T* <span class="keyword">const</span> ct,
<a name="l00162"></a>00162               <span class="keywordtype">void</span> (T::*method)(P),
<a name="l00163"></a>00163               <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00164"></a>00164               P param1)
<a name="l00165"></a>00165       : <a class="code" href="classoperations__research_1_1CallMethod1.html#03ce284b69e5e813a3e463934ead8809">constraint_</a>(ct),
<a name="l00166"></a>00166         <a class="code" href="classoperations__research_1_1CallMethod1.html#a2f2a99ee1fefe354a2afdda1ce59f0a">method_</a>(method),
<a name="l00167"></a>00167         <a class="code" href="classoperations__research_1_1CallMethod1.html#c3a60b3aa3edd4a7aec9bc73a30b1e6d">name_</a>(name),
<a name="l00168"></a>00168         <a class="code" href="classoperations__research_1_1CallMethod1.html#51e0ea4bf168397b8f1f8776b65e9b0e">param1_</a>(param1) {}
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#5c9f461024162679db563d776c12eca2">00170</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1CallMethod1.html#5c9f461024162679db563d776c12eca2">~CallMethod1</a>() {}
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#e32066db529918d4679826ef4e41524a">00172</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1CallMethod1.html#e32066db529918d4679826ef4e41524a" title="This is the main callback of the demon.">Run</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00173"></a>00173     (<a class="code" href="classoperations__research_1_1CallMethod1.html#03ce284b69e5e813a3e463934ead8809">constraint_</a>-&gt;*<a class="code" href="classoperations__research_1_1CallMethod1.html#a2f2a99ee1fefe354a2afdda1ce59f0a">method_</a>)(<a class="code" href="classoperations__research_1_1CallMethod1.html#51e0ea4bf168397b8f1f8776b65e9b0e">param1_</a>);
<a name="l00174"></a>00174   }
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#723a0a471db247c0ebad3a2429893465">00176</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1CallMethod1.html#723a0a471db247c0ebad3a2429893465">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00177"></a>00177     <span class="keywordflow">return</span> StrCat(StrCat(<span class="stringliteral">"CallMethod_"</span>, <a class="code" href="classoperations__research_1_1CallMethod1.html#c3a60b3aa3edd4a7aec9bc73a30b1e6d">name_</a>),
<a name="l00178"></a>00178                   StrCat(<span class="stringliteral">"("</span>, <a class="code" href="classoperations__research_1_1CallMethod1.html#03ce284b69e5e813a3e463934ead8809">constraint_</a>-&gt;DebugString(), <span class="stringliteral">", "</span>),
<a name="l00179"></a>00179                   StrCat(<a class="code" href="classoperations__research_1_1CallMethod1.html#51e0ea4bf168397b8f1f8776b65e9b0e">param1_</a>, <span class="stringliteral">")"</span>));
<a name="l00180"></a>00180   }
<a name="l00181"></a>00181  <span class="keyword">private</span>:
<a name="l00182"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#03ce284b69e5e813a3e463934ead8809">00182</a>   T* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1CallMethod1.html#03ce284b69e5e813a3e463934ead8809">constraint_</a>;
<a name="l00183"></a>00183   void (T::* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1CallMethod1.html#a2f2a99ee1fefe354a2afdda1ce59f0a">method_</a>)(P);
<a name="l00184"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#c3a60b3aa3edd4a7aec9bc73a30b1e6d">00184</a>   <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1CallMethod1.html#c3a60b3aa3edd4a7aec9bc73a30b1e6d">name_</a>;
<a name="l00185"></a><a class="code" href="classoperations__research_1_1CallMethod1.html#51e0ea4bf168397b8f1f8776b65e9b0e">00185</a>   P <a class="code" href="classoperations__research_1_1CallMethod1.html#51e0ea4bf168397b8f1f8776b65e9b0e">param1_</a>;
<a name="l00186"></a>00186 };
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P&gt;
<a name="l00189"></a><a class="code" href="namespaceoperations__research.html#bc7cb18be5d9d418d32782253cd4bf5a">00189</a> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <a class="code" href="namespaceoperations__research.html#bc7cb18be5d9d418d32782253cd4bf5a">MakeConstraintDemon1</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00190"></a>00190                             T* <span class="keyword">const</span> ct,
<a name="l00191"></a>00191                             <span class="keywordtype">void</span> (T::*method)(P),
<a name="l00192"></a>00192                             <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00193"></a>00193                             P param1) {
<a name="l00194"></a>00194   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#83ceb54f811483fd1c0444cddba8a600" title="The RevAlloc method stores the corresponding object in a stack.">RevAlloc</a>(<span class="keyword">new</span> <a class="code" href="classoperations__research_1_1CallMethod1.html" title="Call one method with one param.">CallMethod1&lt;T, P&gt;</a>(ct, method, name, param1));
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">// ----- Call one method with two params -----</span>
<a name="l00198"></a><a class="code" href="classoperations__research_1_1CallMethod2.html">00198</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P, <span class="keyword">class</span> Q&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1CallMethod2.html" title="Call one method with two params.">CallMethod2</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a> {
<a name="l00199"></a>00199  <span class="keyword">public</span>:
<a name="l00200"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#83f7fed30c303197dd91f208c2097782">00200</a>   <a class="code" href="classoperations__research_1_1CallMethod2.html#83f7fed30c303197dd91f208c2097782">CallMethod2</a>(T* <span class="keyword">const</span> ct,
<a name="l00201"></a>00201               <span class="keywordtype">void</span> (T::*method)(P, Q),
<a name="l00202"></a>00202               <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00203"></a>00203               P param1,
<a name="l00204"></a>00204               Q param2)
<a name="l00205"></a>00205       : <a class="code" href="classoperations__research_1_1CallMethod2.html#57ca921a0934318c7874ea05c4a51607">constraint_</a>(ct),
<a name="l00206"></a>00206         <a class="code" href="classoperations__research_1_1CallMethod2.html#a67f9e91b945c7af7aa19e312fc525af">method_</a>(method),
<a name="l00207"></a>00207         <a class="code" href="classoperations__research_1_1CallMethod2.html#9f1df4438260f11f810474f80336cdc7">name_</a>(name),
<a name="l00208"></a>00208         <a class="code" href="classoperations__research_1_1CallMethod2.html#e556632f4171e52673966df29a76356a">param1_</a>(param1),
<a name="l00209"></a>00209         <a class="code" href="classoperations__research_1_1CallMethod2.html#9cce641ce3fef6cb0fbdfef8ce00e6d9">param2_</a>(param2) {}
<a name="l00210"></a>00210 
<a name="l00211"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#873cbc01937925af1c77803ab8776c68">00211</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1CallMethod2.html#873cbc01937925af1c77803ab8776c68">~CallMethod2</a>() {}
<a name="l00212"></a>00212 
<a name="l00213"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#3a08e2cd1dee3a1acff95eac01533b7c">00213</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1CallMethod2.html#3a08e2cd1dee3a1acff95eac01533b7c" title="This is the main callback of the demon.">Run</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00214"></a>00214     (<a class="code" href="classoperations__research_1_1CallMethod2.html#57ca921a0934318c7874ea05c4a51607">constraint_</a>-&gt;*<a class="code" href="classoperations__research_1_1CallMethod2.html#a67f9e91b945c7af7aa19e312fc525af">method_</a>)(<a class="code" href="classoperations__research_1_1CallMethod2.html#e556632f4171e52673966df29a76356a">param1_</a>, <a class="code" href="classoperations__research_1_1CallMethod2.html#9cce641ce3fef6cb0fbdfef8ce00e6d9">param2_</a>);
<a name="l00215"></a>00215   }
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#d79b89d1843346000c3f6fa65a2ac6e1">00217</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1CallMethod2.html#d79b89d1843346000c3f6fa65a2ac6e1">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00218"></a>00218     <span class="keywordflow">return</span> StrCat(StrCat(<span class="stringliteral">"CallMethod_"</span>, <a class="code" href="classoperations__research_1_1CallMethod2.html#9f1df4438260f11f810474f80336cdc7">name_</a>),
<a name="l00219"></a>00219                   StrCat(<span class="stringliteral">"("</span>, <a class="code" href="classoperations__research_1_1CallMethod2.html#57ca921a0934318c7874ea05c4a51607">constraint_</a>-&gt;DebugString()),
<a name="l00220"></a>00220                   StrCat(<span class="stringliteral">", "</span>, <a class="code" href="classoperations__research_1_1CallMethod2.html#e556632f4171e52673966df29a76356a">param1_</a>),
<a name="l00221"></a>00221                   StrCat(<span class="stringliteral">", "</span>, <a class="code" href="classoperations__research_1_1CallMethod2.html#9cce641ce3fef6cb0fbdfef8ce00e6d9">param2_</a>, <span class="stringliteral">")"</span>));
<a name="l00222"></a>00222   }
<a name="l00223"></a>00223  <span class="keyword">private</span>:
<a name="l00224"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#57ca921a0934318c7874ea05c4a51607">00224</a>   T* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1CallMethod2.html#57ca921a0934318c7874ea05c4a51607">constraint_</a>;
<a name="l00225"></a>00225   void (T::* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1CallMethod2.html#a67f9e91b945c7af7aa19e312fc525af">method_</a>)(P, Q);
<a name="l00226"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#9f1df4438260f11f810474f80336cdc7">00226</a>   <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1CallMethod2.html#9f1df4438260f11f810474f80336cdc7">name_</a>;
<a name="l00227"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#e556632f4171e52673966df29a76356a">00227</a>   P <a class="code" href="classoperations__research_1_1CallMethod2.html#e556632f4171e52673966df29a76356a">param1_</a>;
<a name="l00228"></a><a class="code" href="classoperations__research_1_1CallMethod2.html#9cce641ce3fef6cb0fbdfef8ce00e6d9">00228</a>   Q <a class="code" href="classoperations__research_1_1CallMethod2.html#9cce641ce3fef6cb0fbdfef8ce00e6d9">param2_</a>;
<a name="l00229"></a>00229 };
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P, <span class="keyword">class</span> Q&gt;
<a name="l00232"></a><a class="code" href="namespaceoperations__research.html#47fe3ccce1dc5fe8f97cce749af70814">00232</a> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <a class="code" href="namespaceoperations__research.html#47fe3ccce1dc5fe8f97cce749af70814">MakeConstraintDemon2</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00233"></a>00233                             T* <span class="keyword">const</span> ct,
<a name="l00234"></a>00234                             <span class="keywordtype">void</span> (T::*method)(P, Q),
<a name="l00235"></a>00235                             <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00236"></a>00236                             P param1,
<a name="l00237"></a>00237                             Q param2) {
<a name="l00238"></a>00238   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#83ceb54f811483fd1c0444cddba8a600" title="The RevAlloc method stores the corresponding object in a stack.">RevAlloc</a>(<span class="keyword">new</span> <a class="code" href="classoperations__research_1_1CallMethod2.html" title="Call one method with two params.">CallMethod2&lt;T, P, Q&gt;</a>(ct,
<a name="l00239"></a>00239                                               method,
<a name="l00240"></a>00240                                               name,
<a name="l00241"></a>00241                                               param1,
<a name="l00242"></a>00242                                               param2));
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 <span class="comment">// These methods represents generic demons that will call back a</span>
<a name="l00246"></a>00246 <span class="comment">// method on the constraint during their Run method. This demon will</span>
<a name="l00247"></a>00247 <span class="comment">// have a priority DELAYED_PRIORITY.</span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 <span class="comment">// ----- DelayedCall one method with no param -----</span>
<a name="l00250"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html">00250</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html" title="These methods represents generic demons that will call back a method on the constraint...">DelayedCallMethod0</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a> {
<a name="l00251"></a>00251  <span class="keyword">public</span>:
<a name="l00252"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#0805434d4f37d6a493ae3d681ec805cf">00252</a>   <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#0805434d4f37d6a493ae3d681ec805cf">DelayedCallMethod0</a>(T* <span class="keyword">const</span> ct, <span class="keywordtype">void</span> (T::*method)(), <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name)
<a name="l00253"></a>00253       : <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#9c61e44cfd446edbbed3d1e06f202580">constraint_</a>(ct), <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#ae19271da2e244894c807dfa778381b4">method_</a>(method), <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#c2caafd2fed7874ecae36d705af77200">name_</a>(name) {}
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#1757840b905de1823b2d22c7652ab398">00255</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#1757840b905de1823b2d22c7652ab398">~DelayedCallMethod0</a>() {}
<a name="l00256"></a>00256 
<a name="l00257"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#99d898a9cd49adc119c75b46d7bb7a78">00257</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#99d898a9cd49adc119c75b46d7bb7a78" title="This is the main callback of the demon.">Run</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00258"></a>00258     (<a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#9c61e44cfd446edbbed3d1e06f202580">constraint_</a>-&gt;*<a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#ae19271da2e244894c807dfa778381b4">method_</a>)();
<a name="l00259"></a>00259   }
<a name="l00260"></a>00260 
<a name="l00261"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#368f94ffca3e63bc3cc0583d4cf53bdb">00261</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4">Solver::DemonPriority</a> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#368f94ffca3e63bc3cc0583d4cf53bdb" title="This method returns the priority of the demon.">priority</a>()<span class="keyword"> const </span>{
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4f8769149902a8a2b168069cb93cc6370">Solver::DELAYED_PRIORITY</a>;
<a name="l00263"></a>00263   }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#7b295d116055fa88244f57284c70de29">00265</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#7b295d116055fa88244f57284c70de29">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00266"></a>00266     <span class="keywordflow">return</span> <span class="stringliteral">"DelayedCallMethod_"</span>
<a name="l00267"></a>00267         + <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#c2caafd2fed7874ecae36d705af77200">name_</a> + <span class="stringliteral">"("</span> + <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#9c61e44cfd446edbbed3d1e06f202580">constraint_</a>-&gt;DebugString() + <span class="stringliteral">")"</span>;
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270  <span class="keyword">private</span>:
<a name="l00271"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#9c61e44cfd446edbbed3d1e06f202580">00271</a>   T* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#9c61e44cfd446edbbed3d1e06f202580">constraint_</a>;
<a name="l00272"></a>00272   void (T::* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#ae19271da2e244894c807dfa778381b4">method_</a>)();
<a name="l00273"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#c2caafd2fed7874ecae36d705af77200">00273</a>   <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html#c2caafd2fed7874ecae36d705af77200">name_</a>;
<a name="l00274"></a>00274 };
<a name="l00275"></a>00275 
<a name="l00276"></a><a class="code" href="namespaceoperations__research.html#16f35a1c0ce076f2587fffbab80200b6">00276</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <a class="code" href="namespaceoperations__research.html#16f35a1c0ce076f2587fffbab80200b6">MakeDelayedConstraintDemon0</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00277"></a>00277                                                       T* <span class="keyword">const</span> ct,
<a name="l00278"></a>00278                                                       <span class="keywordtype">void</span> (T::*method)(),
<a name="l00279"></a>00279                                                       <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {
<a name="l00280"></a>00280   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#83ceb54f811483fd1c0444cddba8a600" title="The RevAlloc method stores the corresponding object in a stack.">RevAlloc</a>(<span class="keyword">new</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod0.html" title="These methods represents generic demons that will call back a method on the constraint...">DelayedCallMethod0&lt;T&gt;</a>(ct, method, name));
<a name="l00281"></a>00281 }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="comment">// ----- DelayedCall one method with one param -----</span>
<a name="l00284"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html">00284</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html" title="DelayedCall one method with one param.">DelayedCallMethod1</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a> {
<a name="l00285"></a>00285  <span class="keyword">public</span>:
<a name="l00286"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#ca6503a150313be3c7f51ee30344eb41">00286</a>   <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#ca6503a150313be3c7f51ee30344eb41">DelayedCallMethod1</a>(T* <span class="keyword">const</span> ct,
<a name="l00287"></a>00287                      <span class="keywordtype">void</span> (T::*method)(P),
<a name="l00288"></a>00288                      <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00289"></a>00289                      P param1)
<a name="l00290"></a>00290       : <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#13c4c16bd2105f0a41bfb535ea4d6daa">constraint_</a>(ct),
<a name="l00291"></a>00291         <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#a63c445c4316fe5696ae1a9a707b219d">method_</a>(method),
<a name="l00292"></a>00292         <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#1c40ad60bc7b2571b2b290a01f7eed01">name_</a>(name),
<a name="l00293"></a>00293         <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#3dbca700248e1843b0bb6e0fde0ea0a6">param1_</a>(param1) {}
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#d477e4830ec7170e3c1540cd3d130bd3">00295</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#d477e4830ec7170e3c1540cd3d130bd3">~DelayedCallMethod1</a>() {}
<a name="l00296"></a>00296 
<a name="l00297"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#256fb6bf344f23781cad355ed3efc2c4">00297</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#256fb6bf344f23781cad355ed3efc2c4" title="This is the main callback of the demon.">Run</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00298"></a>00298     (<a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#13c4c16bd2105f0a41bfb535ea4d6daa">constraint_</a>-&gt;*<a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#a63c445c4316fe5696ae1a9a707b219d">method_</a>)(<a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#3dbca700248e1843b0bb6e0fde0ea0a6">param1_</a>);
<a name="l00299"></a>00299   }
<a name="l00300"></a>00300 
<a name="l00301"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#f9683d25e85b5b3b4696d7deb39d492f">00301</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4">Solver::DemonPriority</a> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#f9683d25e85b5b3b4696d7deb39d492f" title="This method returns the priority of the demon.">priority</a>()<span class="keyword"> const </span>{
<a name="l00302"></a>00302     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4f8769149902a8a2b168069cb93cc6370">Solver::DELAYED_PRIORITY</a>;
<a name="l00303"></a>00303   }
<a name="l00304"></a>00304 
<a name="l00305"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#9b638064e2c2e502e632ec885ace5f30">00305</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#9b638064e2c2e502e632ec885ace5f30">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00306"></a>00306     <span class="keywordflow">return</span> StrCat(StrCat(<span class="stringliteral">"DelayedCallMethod_"</span>, <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#1c40ad60bc7b2571b2b290a01f7eed01">name_</a>),
<a name="l00307"></a>00307                   StrCat(<span class="stringliteral">"("</span>, <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#13c4c16bd2105f0a41bfb535ea4d6daa">constraint_</a>-&gt;DebugString(), <span class="stringliteral">", "</span>),
<a name="l00308"></a>00308                   StrCat(<a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#3dbca700248e1843b0bb6e0fde0ea0a6">param1_</a>, <span class="stringliteral">")"</span>));
<a name="l00309"></a>00309   }
<a name="l00310"></a>00310  <span class="keyword">private</span>:
<a name="l00311"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#13c4c16bd2105f0a41bfb535ea4d6daa">00311</a>   T* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#13c4c16bd2105f0a41bfb535ea4d6daa">constraint_</a>;
<a name="l00312"></a>00312   void (T::* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#a63c445c4316fe5696ae1a9a707b219d">method_</a>)(P);
<a name="l00313"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#1c40ad60bc7b2571b2b290a01f7eed01">00313</a>   <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#1c40ad60bc7b2571b2b290a01f7eed01">name_</a>;
<a name="l00314"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#3dbca700248e1843b0bb6e0fde0ea0a6">00314</a>   P <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html#3dbca700248e1843b0bb6e0fde0ea0a6">param1_</a>;
<a name="l00315"></a>00315 };
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P&gt;
<a name="l00318"></a><a class="code" href="namespaceoperations__research.html#869e6e925746cfabd4ed3a12bdb44cfb">00318</a> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <a class="code" href="namespaceoperations__research.html#869e6e925746cfabd4ed3a12bdb44cfb">MakeDelayedConstraintDemon1</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00319"></a>00319                                    T* <span class="keyword">const</span> ct,
<a name="l00320"></a>00320                                    <span class="keywordtype">void</span> (T::*method)(P),
<a name="l00321"></a>00321                                    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00322"></a>00322                                    P param1) {
<a name="l00323"></a>00323   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#83ceb54f811483fd1c0444cddba8a600" title="The RevAlloc method stores the corresponding object in a stack.">RevAlloc</a>(<span class="keyword">new</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod1.html" title="DelayedCall one method with one param.">DelayedCallMethod1&lt;T, P&gt;</a>(ct, method, name, param1));
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326 <span class="comment">// ----- DelayedCall one method with two params -----</span>
<a name="l00327"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html">00327</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P, <span class="keyword">class</span> Q&gt; <span class="keyword">class </span><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html" title="DelayedCall one method with two params.">DelayedCallMethod2</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a> {
<a name="l00328"></a>00328  <span class="keyword">public</span>:
<a name="l00329"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#81896cbb39b73e18e6cc18adce0c552c">00329</a>   <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#81896cbb39b73e18e6cc18adce0c552c">DelayedCallMethod2</a>(T* <span class="keyword">const</span> ct,
<a name="l00330"></a>00330                      <span class="keywordtype">void</span> (T::*method)(P, Q),
<a name="l00331"></a>00331                      <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00332"></a>00332                      P param1,
<a name="l00333"></a>00333                      Q param2)
<a name="l00334"></a>00334       : <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#7f15f371b70dee2393f732e4960ec61d">constraint_</a>(ct),
<a name="l00335"></a>00335         <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#2f294b41ae7e470f004819f38fa1418d">method_</a>(method),
<a name="l00336"></a>00336         <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#6846f9e816bf17522f2d6a7e59c60e7f">name_</a>(name),
<a name="l00337"></a>00337         <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#b36ac21d2d666d0fe16b756caabf373c">param1_</a>(param1),
<a name="l00338"></a>00338         <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#63ba9b18555509250a4f372a10aaf1e7">param2_</a>(param2) {}
<a name="l00339"></a>00339 
<a name="l00340"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#ce48f3cde9db24ae1114bffc94a2bb40">00340</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#ce48f3cde9db24ae1114bffc94a2bb40">~DelayedCallMethod2</a>() {}
<a name="l00341"></a>00341 
<a name="l00342"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#3253b1999d7c9f17e720cc4f8071300e">00342</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#3253b1999d7c9f17e720cc4f8071300e" title="This is the main callback of the demon.">Run</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s) {
<a name="l00343"></a>00343     (<a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#7f15f371b70dee2393f732e4960ec61d">constraint_</a>-&gt;*<a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#2f294b41ae7e470f004819f38fa1418d">method_</a>)(<a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#b36ac21d2d666d0fe16b756caabf373c">param1_</a>, <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#63ba9b18555509250a4f372a10aaf1e7">param2_</a>);
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345 
<a name="l00346"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#8dcc2537662160b69f3875b80f66476e">00346</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4">Solver::DemonPriority</a> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#8dcc2537662160b69f3875b80f66476e" title="This method returns the priority of the demon.">priority</a>()<span class="keyword"> const </span>{
<a name="l00347"></a>00347     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1Solver.html#4b0972c731faf884eba5acab99ebb2b4f8769149902a8a2b168069cb93cc6370">Solver::DELAYED_PRIORITY</a>;
<a name="l00348"></a>00348   }
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#e7f0a4be71bcb74ed1fa6cfc95ea60ef">00350</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#e7f0a4be71bcb74ed1fa6cfc95ea60ef">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00351"></a>00351     <span class="keywordflow">return</span> StrCat(StrCat(<span class="stringliteral">"DelayedCallMethod_"</span>, <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#6846f9e816bf17522f2d6a7e59c60e7f">name_</a>),
<a name="l00352"></a>00352                   StrCat(<span class="stringliteral">"("</span>, <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#7f15f371b70dee2393f732e4960ec61d">constraint_</a>-&gt;DebugString()),
<a name="l00353"></a>00353                   StrCat(<span class="stringliteral">", "</span>, <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#b36ac21d2d666d0fe16b756caabf373c">param1_</a>),
<a name="l00354"></a>00354                   StrCat(<span class="stringliteral">", "</span>, <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#63ba9b18555509250a4f372a10aaf1e7">param2_</a>, <span class="stringliteral">")"</span>));
<a name="l00355"></a>00355   }
<a name="l00356"></a>00356  <span class="keyword">private</span>:
<a name="l00357"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#7f15f371b70dee2393f732e4960ec61d">00357</a>   T* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#7f15f371b70dee2393f732e4960ec61d">constraint_</a>;
<a name="l00358"></a>00358   void (T::* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#2f294b41ae7e470f004819f38fa1418d">method_</a>)(P, Q);
<a name="l00359"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#6846f9e816bf17522f2d6a7e59c60e7f">00359</a>   <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#6846f9e816bf17522f2d6a7e59c60e7f">name_</a>;
<a name="l00360"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#b36ac21d2d666d0fe16b756caabf373c">00360</a>   P <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#b36ac21d2d666d0fe16b756caabf373c">param1_</a>;
<a name="l00361"></a><a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#63ba9b18555509250a4f372a10aaf1e7">00361</a>   Q <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html#63ba9b18555509250a4f372a10aaf1e7">param2_</a>;
<a name="l00362"></a>00362 };
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> P, <span class="keyword">class</span> Q&gt;
<a name="l00365"></a><a class="code" href="namespaceoperations__research.html#5970c2f94a662226b28e1ecab2ac83b7">00365</a> <a class="code" href="classoperations__research_1_1Demon.html" title="A Demon is the base element of a propagation queue.">Demon</a>* <a class="code" href="namespaceoperations__research.html#5970c2f94a662226b28e1ecab2ac83b7" title="!defined(SWIG)">MakeDelayedConstraintDemon2</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00366"></a>00366                                    T* <span class="keyword">const</span> ct,
<a name="l00367"></a>00367                                    <span class="keywordtype">void</span> (T::*method)(P, Q),
<a name="l00368"></a>00368                                    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name,
<a name="l00369"></a>00369                                    P param1,
<a name="l00370"></a>00370                                    Q param2) {
<a name="l00371"></a>00371   <span class="keywordflow">return</span> s-&gt;<a class="code" href="classoperations__research_1_1Solver.html#83ceb54f811483fd1c0444cddba8a600" title="The RevAlloc method stores the corresponding object in a stack.">RevAlloc</a>(<span class="keyword">new</span> <a class="code" href="classoperations__research_1_1DelayedCallMethod2.html" title="DelayedCall one method with two params.">DelayedCallMethod2&lt;T, P, Q&gt;</a>(ct,
<a name="l00372"></a>00372                                                      method,
<a name="l00373"></a>00373                                                      name,
<a name="l00374"></a>00374                                                      param1,
<a name="l00375"></a>00375                                                      param2));
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 <span class="preprocessor">#endif   // !defined(SWIG)</span>
<a name="l00379"></a>00379 <span class="preprocessor"></span>
<a name="l00380"></a>00380 <span class="keyword">class </span>NestedSolveDecision;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 <span class="comment">// ---------- Local search operators ----------</span>
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="comment">// A local search operator is an object which defines the neighborhood of a</span>
<a name="l00385"></a>00385 <span class="comment">// solution; in other words, a neighborhood is the set of solutions which can</span>
<a name="l00386"></a>00386 <span class="comment">// be reached from a given solution using an operator.</span>
<a name="l00387"></a>00387 <span class="comment">// The behavior of the LocalSearchOperator class is similar to the one of an</span>
<a name="l00388"></a>00388 <span class="comment">// iterator. The operator is synchronized with an assignment (gives the</span>
<a name="l00389"></a>00389 <span class="comment">// current values of the variables); this is done in the Start() method.</span>
<a name="l00390"></a>00390 <span class="comment">// Then one can iterate over the neighbors using the MakeNextNeighbor method.</span>
<a name="l00391"></a>00391 <span class="comment">// This method returns an assignment which represents the incremental changes</span>
<a name="l00392"></a>00392 <span class="comment">// to the curent solution. It also returns a second assignment representing the</span>
<a name="l00393"></a>00393 <span class="comment">// changes to the last solution defined by the neighborhood operator; this</span>
<a name="l00394"></a>00394 <span class="comment">// assignment is empty is the neighborhood operator cannot track this</span>
<a name="l00395"></a>00395 <span class="comment">// information.</span>
<a name="l00396"></a>00396 <span class="comment">// TODO(user): rename Start to Synchronize ?</span>
<a name="l00397"></a>00397 <span class="comment">// TODO(user): decouple the iterating from the defining of a neighbor</span>
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 <span class="comment">// Mother of all local search operators</span>
<a name="l00400"></a><a class="code" href="classoperations__research_1_1LocalSearchOperator.html">00400</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1LocalSearchOperator.html" title="Local search operators.">LocalSearchOperator</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1BaseObject.html" title="Useful Search and Modeling Objects.">BaseObject</a> {
<a name="l00401"></a>00401  <span class="keyword">public</span>:
<a name="l00402"></a><a class="code" href="classoperations__research_1_1LocalSearchOperator.html#f23505cc80b48f7de0c2e6a8d8424c5e">00402</a>   <a class="code" href="classoperations__research_1_1LocalSearchOperator.html#f23505cc80b48f7de0c2e6a8d8424c5e">LocalSearchOperator</a>() {}
<a name="l00403"></a><a class="code" href="classoperations__research_1_1LocalSearchOperator.html#505cf4a4020ebf8b2d2f67df3477adb4">00403</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1LocalSearchOperator.html#505cf4a4020ebf8b2d2f67df3477adb4">~LocalSearchOperator</a>() {}
<a name="l00404"></a>00404   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1LocalSearchOperator.html#2951ae57e5fd3fce7d4f9b831594b460">MakeNextNeighbor</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta) = 0;
<a name="l00405"></a>00405   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1LocalSearchOperator.html#832fd07f7355d16895841a4735e544c1">Start</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* assignment) = 0;
<a name="l00406"></a>00406 };
<a name="l00407"></a>00407 
<a name="l00408"></a>00408 <span class="comment">// ----- Base operator class for operators manipulating IntVars -----</span>
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="comment">// Built from an array of IntVars which specifies the scope of the operator</span>
<a name="l00411"></a>00411 <span class="comment">// This class also takes care of storing current variable values in Start(),</span>
<a name="l00412"></a>00412 <span class="comment">// keeps track of changes done by the operator and builds the delta.</span>
<a name="l00413"></a>00413 <span class="comment">// The Deactivate() method can be used to perform Large Neighborhood Search.</span>
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html">00415</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html" title="Base operator class for operators manipulating IntVars.">IntVarLocalSearchOperator</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1LocalSearchOperator.html" title="Local search operators.">LocalSearchOperator</a> {
<a name="l00416"></a>00416  <span class="keyword">public</span>:
<a name="l00417"></a>00417   <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#3740dbc5d381ba063f5ac0f0134b1edf" title="Base operator class for operators manipulating IntVars.">IntVarLocalSearchOperator</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars, <span class="keywordtype">int</span> size);
<a name="l00418"></a>00418   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#d61ecedaa6bdfb4a34c01687ec7bb197">~IntVarLocalSearchOperator</a>();
<a name="l00419"></a>00419   <span class="comment">// This method should not be overridden. Override OnStart() instead which is</span>
<a name="l00420"></a>00420   <span class="comment">// called before exiting this method.</span>
<a name="l00421"></a>00421   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#86ada2075515afdcd7f8979f4a2ee55d" title="This method should not be overridden.">Start</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* assignment);
<a name="l00422"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#3aadcb0db97dbb1f9bbdeb6b7027263d">00422</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#3aadcb0db97dbb1f9bbdeb6b7027263d">IsIncremental</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00423"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#06049b26315b8312917df7d0981c66cd">00423</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#06049b26315b8312917df7d0981c66cd">Size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#feeeb02ad01c4ad96b26ca5e8007e2a3">size_</a>; }
<a name="l00424"></a>00424   <span class="comment">// Returns the value in the current assignment of the variable of given index.</span>
<a name="l00425"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#b9b49aa4a778263f2d60e70e39577e73">00425</a>   int64 <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#b9b49aa4a778263f2d60e70e39577e73" title="Returns the value in the current assignment of the variable of given index.">Value</a>(int64 index)<span class="keyword"> const </span>{
<a name="l00426"></a>00426     DCHECK_LT(index, <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#feeeb02ad01c4ad96b26ca5e8007e2a3">size_</a>);
<a name="l00427"></a>00427     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#94d71f7a4f553ef810d67e7451a4e1d6">values_</a>[index];
<a name="l00428"></a>00428   }
<a name="l00429"></a>00429   <span class="comment">// Returns the variable of given index.</span>
<a name="l00430"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#d8d6076357a0fca565cbdc586006d513">00430</a>   <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#d8d6076357a0fca565cbdc586006d513" title="Returns the variable of given index.">Var</a>(int64 index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#4126a2c3576ce28dd490e5522674a23b">vars_</a>[index]; }
<a name="l00431"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#8e2dfc7ab50a078f22dac560d91973d3">00431</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#8e2dfc7ab50a078f22dac560d91973d3">SkipUnchanged</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00432"></a>00432  <span class="keyword">protected</span>:
<a name="l00433"></a>00433   <span class="comment">// Called by Start() after synchronizing the operator with the current</span>
<a name="l00434"></a>00434   <span class="comment">// assignment. Should be overridden instead of Start() to avoid calling</span>
<a name="l00435"></a>00435   <span class="comment">// IntVarLocalSearchOperator::Start explicitly.</span>
<a name="l00436"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#279160bdb41d77ea714bcd5960685ff3">00436</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#279160bdb41d77ea714bcd5960685ff3" title="Called by Start() after synchronizing the operator with the current assignment.">OnStart</a>() {}
<a name="l00437"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#dcb0d248ee16199ea6dbfad900a1e0ec">00437</a>   int64 <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#dcb0d248ee16199ea6dbfad900a1e0ec">OldValue</a>(int64 index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#bcc90f2b1eb5a4b8646ae76bc61e3fce">old_values_</a>[index]; }
<a name="l00438"></a>00438   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#50588f7d283f450f9d78ecdabd402e95">SetValue</a>(int64 index, int64 value);
<a name="l00439"></a>00439   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#8df2a236c7429fc3f5ef9801c8c553f7">Activated</a>(int64 index) <span class="keyword">const</span>;
<a name="l00440"></a>00440   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#08206ce321501a2f2059a40f44f1d75d">Activate</a>(int64 index);
<a name="l00441"></a>00441   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#f08da496dbe37aceaacd1833b95a5c4f">Deactivate</a>(int64 index);
<a name="l00442"></a>00442   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#57026a137a5e7edb907db52299150598">ApplyChanges</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta) <span class="keyword">const</span>;
<a name="l00443"></a>00443   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#ea723d799bb0f6d39ee2f80c7c3eef44">RevertChanges</a>(<span class="keywordtype">bool</span> incremental);
<a name="l00444"></a>00444   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#373531e56b70f8487427129f2daeb5a5">AddVars</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars, <span class="keywordtype">int</span> size);
<a name="l00445"></a>00445  <span class="keyword">private</span>:
<a name="l00446"></a>00446   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#73efdde3c67766a7e81adc85b140dfb6">MarkChange</a>(int64 index);
<a name="l00447"></a>00447 
<a name="l00448"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#4126a2c3576ce28dd490e5522674a23b">00448</a>   scoped_array&lt;IntVar*&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#4126a2c3576ce28dd490e5522674a23b">vars_</a>;
<a name="l00449"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#feeeb02ad01c4ad96b26ca5e8007e2a3">00449</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#feeeb02ad01c4ad96b26ca5e8007e2a3">size_</a>;
<a name="l00450"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#94d71f7a4f553ef810d67e7451a4e1d6">00450</a>   scoped_array&lt;int64&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#94d71f7a4f553ef810d67e7451a4e1d6">values_</a>;
<a name="l00451"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#bcc90f2b1eb5a4b8646ae76bc61e3fce">00451</a>   scoped_array&lt;int64&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#bcc90f2b1eb5a4b8646ae76bc61e3fce">old_values_</a>;
<a name="l00452"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#f832ed89cab7a8d14037db3861071e1b">00452</a>   Bitmap <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#f832ed89cab7a8d14037db3861071e1b">activated_</a>;
<a name="l00453"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#5a4ea3455b3fa5737ed28f7816e2648f">00453</a>   Bitmap <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#5a4ea3455b3fa5737ed28f7816e2648f">was_activated_</a>;
<a name="l00454"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#12209e60cdd85527df3d7577da8f9e3d">00454</a>   vector&lt;int64&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#12209e60cdd85527df3d7577da8f9e3d">changes_</a>;
<a name="l00455"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#12a5ec4706959c48863a6592825f794c">00455</a>   Bitmap <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#12a5ec4706959c48863a6592825f794c">has_changed_</a>;
<a name="l00456"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#7158378507d8c2b04d41b943d761a3b2">00456</a>   Bitmap <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#7158378507d8c2b04d41b943d761a3b2">has_delta_changed_</a>;
<a name="l00457"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#25b7b748225ca48fc9c07e1b1422bd4c">00457</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#25b7b748225ca48fc9c07e1b1422bd4c">cleared_</a>;
<a name="l00458"></a>00458 };
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="comment">// ----- Base Large Neighborhood Search operator class ----</span>
<a name="l00461"></a>00461 
<a name="l00462"></a>00462 <span class="comment">// This is the base class for building an LNS operator. An LNS fragment is a</span>
<a name="l00463"></a>00463 <span class="comment">// collection of variables which will be relaxed. Fragments are build with</span>
<a name="l00464"></a>00464 <span class="comment">// NextFragment(), which returns false if there are no more fragments to build.</span>
<a name="l00465"></a>00465 <span class="comment">// Optionally one can override InitFragments, which is called from</span>
<a name="l00466"></a>00466 <span class="comment">// LocalSearchOperator::Start to initialize fragment data.</span>
<a name="l00467"></a>00467 <span class="comment">//</span>
<a name="l00468"></a>00468 <span class="comment">// Here's a sample relaxing each variable:</span>
<a name="l00469"></a>00469 <span class="comment">//</span>
<a name="l00470"></a>00470 <span class="comment">// class OneVarLNS : public BaseLNS {</span>
<a name="l00471"></a>00471 <span class="comment">//  public:</span>
<a name="l00472"></a>00472 <span class="comment">//   OneVarLNS(const IntVar* const* vars, int size)</span>
<a name="l00473"></a>00473 <span class="comment">//       : BaseLNS(vars, size), index_(0) {}</span>
<a name="l00474"></a>00474 <span class="comment">//   virtual ~OneVarLNS() {}</span>
<a name="l00475"></a>00475 <span class="comment">//   virtual void InitFragments() { index_ = 0; }</span>
<a name="l00476"></a>00476 <span class="comment">//   virtual bool NextFragment(vector&lt;int&gt;* fragment) {</span>
<a name="l00477"></a>00477 <span class="comment">//     const int size = Size();</span>
<a name="l00478"></a>00478 <span class="comment">//     if (index_ &lt; size) {</span>
<a name="l00479"></a>00479 <span class="comment">//       fragment-&gt;push_back(index_);</span>
<a name="l00480"></a>00480 <span class="comment">//       ++index_;</span>
<a name="l00481"></a>00481 <span class="comment">//       return true;</span>
<a name="l00482"></a>00482 <span class="comment">//     } else {</span>
<a name="l00483"></a>00483 <span class="comment">//       return false;</span>
<a name="l00484"></a>00484 <span class="comment">//     }</span>
<a name="l00485"></a>00485 <span class="comment">//   }</span>
<a name="l00486"></a>00486 <span class="comment">//  private:</span>
<a name="l00487"></a>00487 <span class="comment">//   int index_;</span>
<a name="l00488"></a>00488 <span class="comment">// };</span>
<a name="l00489"></a>00489 
<a name="l00490"></a><a class="code" href="classoperations__research_1_1BaseLNS.html">00490</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1BaseLNS.html" title="Base Large Neighborhood Search operator class.">BaseLNS</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html" title="Base operator class for operators manipulating IntVars.">IntVarLocalSearchOperator</a> {
<a name="l00491"></a>00491  <span class="keyword">public</span>:
<a name="l00492"></a>00492   <a class="code" href="classoperations__research_1_1BaseLNS.html#409049a0484aeee559a67289f3da32b0" title="Base Large Neighborhood Search operator.">BaseLNS</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars, <span class="keywordtype">int</span> size);
<a name="l00493"></a>00493   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1BaseLNS.html#af921cd22f2a7694678ca3d5bda27b15">~BaseLNS</a>();
<a name="l00494"></a>00494   <span class="comment">// This method should not be overridden (it calls NextFragment()).</span>
<a name="l00495"></a>00495   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1BaseLNS.html#72072ba65bc6d55552adee7a88b6064a" title="This method should not be overridden (it calls NextFragment()).">MakeNextNeighbor</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta);
<a name="l00496"></a>00496   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1BaseLNS.html#deb75f1c9f12a6c790c49b5e24d62c9a">InitFragments</a>();
<a name="l00497"></a>00497   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1BaseLNS.html#6490d4689095e093a475aa5f2c7cd485">NextFragment</a>(vector&lt;int&gt;* fragment) = 0;
<a name="l00498"></a>00498  <span class="keyword">protected</span>:
<a name="l00499"></a>00499   <span class="comment">// This method should not be overridden. Override InitFragments() instead.</span>
<a name="l00500"></a>00500   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1BaseLNS.html#77d27cbb82f284a04e2a17e89c2870ba" title="This method should not be overridden. Override InitFragments() instead.">OnStart</a>();
<a name="l00501"></a>00501 };
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="comment">// ----- ChangeValue Operators -----</span>
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 <span class="comment">// Defines operators which change the value of variables;</span>
<a name="l00506"></a>00506 <span class="comment">// each neighbor corresponds to *one* modified variable.</span>
<a name="l00507"></a>00507 <span class="comment">// Sub-classes have to define ModifyValue which determines what the new</span>
<a name="l00508"></a>00508 <span class="comment">// variable value is going to be (given the current value and the variable).</span>
<a name="l00509"></a>00509 
<a name="l00510"></a><a class="code" href="classoperations__research_1_1ChangeValue.html">00510</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1ChangeValue.html" title="ChangeValue Operators.">ChangeValue</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html" title="Base operator class for operators manipulating IntVars.">IntVarLocalSearchOperator</a> {
<a name="l00511"></a>00511  <span class="keyword">public</span>:
<a name="l00512"></a>00512   <a class="code" href="classoperations__research_1_1ChangeValue.html#60debfc1502ef81a5c47163b5b2b3203" title="ChangeValue Operators.">ChangeValue</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars, <span class="keywordtype">int</span> size);
<a name="l00513"></a>00513   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1ChangeValue.html#79bca3fafc24fcb9f5b4ae2cb1c2025a">~ChangeValue</a>();
<a name="l00514"></a>00514   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1ChangeValue.html#2b87d6185b6d48b61f4ac3f2648ce0a1">MakeNextNeighbor</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta);
<a name="l00515"></a>00515   <span class="keyword">virtual</span> int64 <a class="code" href="classoperations__research_1_1ChangeValue.html#71b2589b82650decb06c8563310f5d5f">ModifyValue</a>(int64 index, int64 value) = 0;
<a name="l00516"></a>00516  <span class="keyword">protected</span>:
<a name="l00517"></a>00517   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1ChangeValue.html#d87ac2e293b26c4ba3b8c5d8f25e4189" title="Called by Start() after synchronizing the operator with the current assignment.">OnStart</a>();
<a name="l00518"></a>00518  <span class="keyword">private</span>:
<a name="l00519"></a><a class="code" href="classoperations__research_1_1ChangeValue.html#f1408594d7c5c71472774a53ec4f2d25">00519</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1ChangeValue.html#f1408594d7c5c71472774a53ec4f2d25">index_</a>;
<a name="l00520"></a>00520 };
<a name="l00521"></a>00521 
<a name="l00522"></a>00522 <span class="comment">// ----- Path-based Operators -----</span>
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="comment">// Base class of the local search operators dedicated to path modifications</span>
<a name="l00525"></a>00525 <span class="comment">// (a path is a set of nodes linked together by arcs).</span>
<a name="l00526"></a>00526 <span class="comment">// This family of neighborhoods supposes they are handling next variables</span>
<a name="l00527"></a>00527 <span class="comment">// representing the arcs (var[i] represents the node immediately after i on</span>
<a name="l00528"></a>00528 <span class="comment">// a path).</span>
<a name="l00529"></a>00529 <span class="comment">// Several services are provided:</span>
<a name="l00530"></a>00530 <span class="comment">// - arc manipulators (SetNext(), ReverseChain(), MoveChain())</span>
<a name="l00531"></a>00531 <span class="comment">// - path inspectors (Next(), IsPathEnd())</span>
<a name="l00532"></a>00532 <span class="comment">// - path iterators: operators need a given number of nodes to define a</span>
<a name="l00533"></a>00533 <span class="comment">//   neighbor; this class provides the iteration on a given number of (base)</span>
<a name="l00534"></a>00534 <span class="comment">//   nodes which can be used to define a neighbor (through the BaseNode method)</span>
<a name="l00535"></a>00535 <span class="comment">// Subclasses only need to override MakeNeighbor to create neighbors using</span>
<a name="l00536"></a>00536 <span class="comment">// the services above (no direct manipulation of assignments).</span>
<a name="l00537"></a>00537 
<a name="l00538"></a><a class="code" href="classoperations__research_1_1PathOperator.html">00538</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1PathOperator.html" title="Path-based Operators.">PathOperator</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html" title="Base operator class for operators manipulating IntVars.">IntVarLocalSearchOperator</a> {
<a name="l00539"></a>00539  <span class="keyword">public</span>:
<a name="l00540"></a>00540   <a class="code" href="classoperations__research_1_1PathOperator.html#a1f760408851ccfbc70b4a12479aeb3d" title="Path-based Operators.">PathOperator</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* next_vars,
<a name="l00541"></a>00541                <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* path_vars,
<a name="l00542"></a>00542                <span class="keywordtype">int</span> size,
<a name="l00543"></a>00543                <span class="keywordtype">int</span> number_of_base_nodes);
<a name="l00544"></a><a class="code" href="classoperations__research_1_1PathOperator.html#6ac539bb3bd2b373f0d3156ab9c069e3">00544</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1PathOperator.html#6ac539bb3bd2b373f0d3156ab9c069e3">~PathOperator</a>() {}
<a name="l00545"></a>00545   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#bf884d7efc40fbf9932b64623604c23a">MakeNeighbor</a>() = 0;
<a name="l00546"></a>00546   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#323625d14b477365d788b7a1e96bb51d">MakeNextNeighbor</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta, <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548   <span class="comment">// TODO(user): Make the following methods protected.</span>
<a name="l00549"></a>00549   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#ecfa54a5dd5c8ee384330c9ce4111d44">SkipUnchanged</a>(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   <span class="comment">// Returns the index of the node after the node of index node_index in the</span>
<a name="l00552"></a>00552   <span class="comment">// current assignment.</span>
<a name="l00553"></a><a class="code" href="classoperations__research_1_1PathOperator.html#9cb02dcb6c4ee83e896b83af163f189c">00553</a>   int64 <a class="code" href="classoperations__research_1_1PathOperator.html#9cb02dcb6c4ee83e896b83af163f189c" title="Returns the index of the node after the node of index node_index in the current assignment...">Next</a>(int64 node_index)<span class="keyword"> const </span>{
<a name="l00554"></a>00554     DCHECK(!<a class="code" href="classoperations__research_1_1PathOperator.html#e99342a248fb87bb26f11811017fadfb" title="Returns true if i is the last node on the path; defined by the fact that i outside...">IsPathEnd</a>(node_index));
<a name="l00555"></a>00555     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#b9b49aa4a778263f2d60e70e39577e73" title="Returns the value in the current assignment of the variable of given index.">Value</a>(node_index);
<a name="l00556"></a>00556   }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <span class="comment">// Returns the index of the path to which the node of index node_index</span>
<a name="l00559"></a>00559   <span class="comment">// belongs in the current assignment.</span>
<a name="l00560"></a><a class="code" href="classoperations__research_1_1PathOperator.html#c64ad41b1d7e426e979276823e238907">00560</a>   int64 <a class="code" href="classoperations__research_1_1PathOperator.html#c64ad41b1d7e426e979276823e238907" title="Returns the index of the path to which the node of index node_index belongs in the...">Path</a>(int64 node_index)<span class="keyword"> const </span>{
<a name="l00561"></a>00561     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1PathOperator.html#46728a21c28eaf507a20bba345d9df8f">ignore_path_vars_</a> ? 0LL : <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#b9b49aa4a778263f2d60e70e39577e73" title="Returns the value in the current assignment of the variable of given index.">Value</a>(node_index + <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>);
<a name="l00562"></a>00562   }
<a name="l00563"></a>00563 
<a name="l00564"></a>00564   <span class="comment">// Number of next variables.</span>
<a name="l00565"></a><a class="code" href="classoperations__research_1_1PathOperator.html#6bc1ff9fabd4af036d81fecaca979e65">00565</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1PathOperator.html#6bc1ff9fabd4af036d81fecaca979e65" title="Number of next variables.">number_of_nexts</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>; }
<a name="l00566"></a>00566  <span class="keyword">protected</span>:
<a name="l00567"></a>00567   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#89df2c16af4ea844380c434736a033fb" title="Called by Start() after synchronizing the operator with the current assignment.">OnStart</a>();
<a name="l00568"></a>00568   <span class="comment">// Called by OnStart() after initializing node information. Should be</span>
<a name="l00569"></a>00569   <span class="comment">// overriden instead of OnStart() to avoid calling PathOperator::OnStart</span>
<a name="l00570"></a>00570   <span class="comment">// explicitly.</span>
<a name="l00571"></a><a class="code" href="classoperations__research_1_1PathOperator.html#3a42547880b756cc49a876a0c65c28a3">00571</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#3a42547880b756cc49a876a0c65c28a3" title="Called by OnStart() after initializing node information.">OnNodeInitialization</a>() {}
<a name="l00572"></a>00572   <span class="comment">// Returns the index of the variable corresponding to the ith base node.</span>
<a name="l00573"></a><a class="code" href="classoperations__research_1_1PathOperator.html#b97a0e5234d4fe57f9d0b2c9ea1f9f75">00573</a>   int64 <a class="code" href="classoperations__research_1_1PathOperator.html#b97a0e5234d4fe57f9d0b2c9ea1f9f75" title="Returns the index of the variable corresponding to the ith base node.">BaseNode</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1PathOperator.html#a5a8b0f5cf20233999a7b3edf1a82275">base_nodes_</a>[i]; }
<a name="l00574"></a><a class="code" href="classoperations__research_1_1PathOperator.html#0e9cdb820f97a13813de1aa657b54917">00574</a>   int64 <a class="code" href="classoperations__research_1_1PathOperator.html#0e9cdb820f97a13813de1aa657b54917">StartNode</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1PathOperator.html#e6337ab4e3c6fe7e7724a9eb3a902978">path_starts_</a>[<a class="code" href="classoperations__research_1_1PathOperator.html#6923bfa17c44de3daaf2c73bd782fc17">base_paths_</a>[i]]; }
<a name="l00575"></a>00575 
<a name="l00576"></a><a class="code" href="classoperations__research_1_1PathOperator.html#46b2f4edff03a628d654c2fb6531d696">00576</a>   int64 <a class="code" href="classoperations__research_1_1PathOperator.html#46b2f4edff03a628d654c2fb6531d696">OldNext</a>(int64 node_index)<span class="keyword"> const </span>{
<a name="l00577"></a>00577     DCHECK(!<a class="code" href="classoperations__research_1_1PathOperator.html#e99342a248fb87bb26f11811017fadfb" title="Returns true if i is the last node on the path; defined by the fact that i outside...">IsPathEnd</a>(node_index));
<a name="l00578"></a>00578     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#dcb0d248ee16199ea6dbfad900a1e0ec">OldValue</a>(node_index);
<a name="l00579"></a>00579   }
<a name="l00580"></a>00580 
<a name="l00581"></a><a class="code" href="classoperations__research_1_1PathOperator.html#826526bdd70076309b1574d3e35ac43d">00581</a>   int64 <a class="code" href="classoperations__research_1_1PathOperator.html#826526bdd70076309b1574d3e35ac43d">OldPath</a>(int64 node_index)<span class="keyword"> const </span>{
<a name="l00582"></a>00582     <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1PathOperator.html#46728a21c28eaf507a20bba345d9df8f">ignore_path_vars_</a> ? 0LL : <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#dcb0d248ee16199ea6dbfad900a1e0ec">OldValue</a>(node_index + <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>);
<a name="l00583"></a>00583   }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585   <span class="comment">// Moves the chain starting after the node before_chain and ending at the node</span>
<a name="l00586"></a>00586   <span class="comment">// chain_end after the node destination</span>
<a name="l00587"></a>00587   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#a6d431b31dc1fce0520698179e165817" title="Moves the chain starting after the node before_chain and ending at the node chain_end...">MoveChain</a>(int64 before_chain, int64 chain_end, int64 destination);
<a name="l00588"></a>00588 
<a name="l00589"></a>00589   <span class="comment">// Reverses the chain starting after before_chain and ending before</span>
<a name="l00590"></a>00590   <span class="comment">// after_chain</span>
<a name="l00591"></a>00591   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#d819515eabc14b84e8e31b574a59d2fb" title="Reverses the chain starting after before_chain and ending before after_chain.">ReverseChain</a>(int64 before_chain, int64 after_chain, int64* chain_last);
<a name="l00592"></a>00592 
<a name="l00593"></a>00593   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#cb067b917027c878de5284d3ee191528">MakeActive</a>(int64 node, int64 destination);
<a name="l00594"></a>00594   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#12698134e7a71ccbe52c4ce36213f0f1">MakeChainInactive</a>(int64 before_chain, int64 chain_end);
<a name="l00595"></a>00595 
<a name="l00596"></a>00596   <span class="comment">// Sets the to to be the node after from</span>
<a name="l00597"></a><a class="code" href="classoperations__research_1_1PathOperator.html#2f05e5dce708fd86775e612d08ffc08e">00597</a>   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#2f05e5dce708fd86775e612d08ffc08e" title="Sets the to to be the node after from.">SetNext</a>(int64 from, int64 to, int64 path) {
<a name="l00598"></a>00598     DCHECK_LT(from, <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>);
<a name="l00599"></a>00599     <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#50588f7d283f450f9d78ecdabd402e95">SetValue</a>(from, to);
<a name="l00600"></a>00600     <span class="keywordflow">if</span> (!<a class="code" href="classoperations__research_1_1PathOperator.html#46728a21c28eaf507a20bba345d9df8f">ignore_path_vars_</a>) {
<a name="l00601"></a>00601       DCHECK_LT(from + <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>, <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#06049b26315b8312917df7d0981c66cd">Size</a>());
<a name="l00602"></a>00602       <a class="code" href="classoperations__research_1_1IntVarLocalSearchOperator.html#50588f7d283f450f9d78ecdabd402e95">SetValue</a>(from + <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>, path);
<a name="l00603"></a>00603     }
<a name="l00604"></a>00604   }
<a name="l00605"></a>00605 
<a name="l00606"></a>00606   <span class="comment">// Returns true if i is the last node on the path; defined by the fact that</span>
<a name="l00607"></a>00607   <span class="comment">// i outside the range of the variable array</span>
<a name="l00608"></a><a class="code" href="classoperations__research_1_1PathOperator.html#e99342a248fb87bb26f11811017fadfb">00608</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#e99342a248fb87bb26f11811017fadfb" title="Returns true if i is the last node on the path; defined by the fact that i outside...">IsPathEnd</a>(int64 i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> i &gt;= <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>; }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610   <span class="comment">// Returns true if node is inactive</span>
<a name="l00611"></a><a class="code" href="classoperations__research_1_1PathOperator.html#196b60e34960f30c3ea7c8920bc5d77c">00611</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#196b60e34960f30c3ea7c8920bc5d77c" title="Returns true if node is inactive.">IsInactive</a>(int64 i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !<a class="code" href="classoperations__research_1_1PathOperator.html#e99342a248fb87bb26f11811017fadfb" title="Returns true if i is the last node on the path; defined by the fact that i outside...">IsPathEnd</a>(i) &amp;&amp; <a class="code" href="classoperations__research_1_1PathOperator.html#ec35891fc5be332e1cb9dad24c5bf235">inactives_</a>[i]; }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613   <span class="comment">// Returns true if operator needs to restart its initial position at each</span>
<a name="l00614"></a>00614   <span class="comment">// call to Start()</span>
<a name="l00615"></a><a class="code" href="classoperations__research_1_1PathOperator.html#60c038d2bf104585d70b22fad1d64348">00615</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#60c038d2bf104585d70b22fad1d64348" title="Returns true if operator needs to restart its initial position at each call to Start()...">InitPosition</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00616"></a>00616   <span class="comment">// Reset the position of the operator to its position when Start() was last</span>
<a name="l00617"></a>00617   <span class="comment">// called; this can be used to let an operator iterate more than once over</span>
<a name="l00618"></a>00618   <span class="comment">// the paths.</span>
<a name="l00619"></a><a class="code" href="classoperations__research_1_1PathOperator.html#2a1cf2f93320e83de87b6c302f27e00d">00619</a>   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#2a1cf2f93320e83de87b6c302f27e00d" title="Reset the position of the operator to its position when Start() was last called;...">ResetPosition</a>() {
<a name="l00620"></a>00620     <a class="code" href="classoperations__research_1_1PathOperator.html#79850879b50f161253f12a3a95b024a9">just_started_</a> = <span class="keyword">true</span>;
<a name="l00621"></a>00621   }
<a name="l00622"></a>00622  <span class="keyword">protected</span>:
<a name="l00623"></a><a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">00623</a>   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1PathOperator.html#e108cf2f383928202b506cba66e911ee">number_of_nexts_</a>;
<a name="l00624"></a><a class="code" href="classoperations__research_1_1PathOperator.html#46728a21c28eaf507a20bba345d9df8f">00624</a>   <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#46728a21c28eaf507a20bba345d9df8f">ignore_path_vars_</a>;
<a name="l00625"></a>00625  <span class="keyword">private</span>:
<a name="l00626"></a>00626   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#e48f9b41828f79db0161a96d419dcdb5">CheckEnds</a>() <span class="keyword">const</span>;
<a name="l00627"></a>00627   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#bb5f1fd6da34349815ba4d90558bba84">IncrementPosition</a>();
<a name="l00628"></a>00628   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#6c8ed11c7a0a1c862b5b32253ffe890d">InitializePathStarts</a>();
<a name="l00629"></a>00629   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#4f000a68f9bea60006020ccf5b0034fe">InitializeInactives</a>();
<a name="l00630"></a>00630   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#245c63f1247ad889fa09ba1d6f6d5990">InitializeBaseNodes</a>();
<a name="l00631"></a>00631   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#04b0d5032ff64013a263c4ab280aaf16" title="Rejects chain if chain_end is not after before_chain on the path or if the chain...">CheckChainValidity</a>(int64 chain_start,
<a name="l00632"></a>00632                           int64 chain_end,
<a name="l00633"></a>00633                           int64 exclude) <span class="keyword">const</span>;
<a name="l00634"></a>00634   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1PathOperator.html#2b5a9ebfa6ea84b4a4318d75a2c5a760">Synchronize</a>();
<a name="l00635"></a>00635 
<a name="l00636"></a><a class="code" href="classoperations__research_1_1PathOperator.html#a5a8b0f5cf20233999a7b3edf1a82275">00636</a>   vector&lt;int&gt; <a class="code" href="classoperations__research_1_1PathOperator.html#a5a8b0f5cf20233999a7b3edf1a82275">base_nodes_</a>;
<a name="l00637"></a><a class="code" href="classoperations__research_1_1PathOperator.html#2c72f9b50586a82c54fdb549d10c79cc">00637</a>   vector&lt;int&gt; <a class="code" href="classoperations__research_1_1PathOperator.html#2c72f9b50586a82c54fdb549d10c79cc">end_nodes_</a>;
<a name="l00638"></a><a class="code" href="classoperations__research_1_1PathOperator.html#6923bfa17c44de3daaf2c73bd782fc17">00638</a>   vector&lt;int&gt; <a class="code" href="classoperations__research_1_1PathOperator.html#6923bfa17c44de3daaf2c73bd782fc17">base_paths_</a>;
<a name="l00639"></a><a class="code" href="classoperations__research_1_1PathOperator.html#e6337ab4e3c6fe7e7724a9eb3a902978">00639</a>   vector&lt;int64&gt; <a class="code" href="classoperations__research_1_1PathOperator.html#e6337ab4e3c6fe7e7724a9eb3a902978">path_starts_</a>;
<a name="l00640"></a><a class="code" href="classoperations__research_1_1PathOperator.html#ec35891fc5be332e1cb9dad24c5bf235">00640</a>   vector&lt;bool&gt; <a class="code" href="classoperations__research_1_1PathOperator.html#ec35891fc5be332e1cb9dad24c5bf235">inactives_</a>;
<a name="l00641"></a><a class="code" href="classoperations__research_1_1PathOperator.html#79850879b50f161253f12a3a95b024a9">00641</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#79850879b50f161253f12a3a95b024a9">just_started_</a>;
<a name="l00642"></a><a class="code" href="classoperations__research_1_1PathOperator.html#d1eb51cb7214499c834b7ea2db21f51c">00642</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1PathOperator.html#d1eb51cb7214499c834b7ea2db21f51c">first_start_</a>;
<a name="l00643"></a>00643 };
<a name="l00644"></a>00644 
<a name="l00645"></a>00645 <span class="comment">// ----- Local Search Filters ------</span>
<a name="l00646"></a>00646 <span class="comment">// For fast neighbor pruning</span>
<a name="l00647"></a>00647 
<a name="l00648"></a><a class="code" href="classoperations__research_1_1LocalSearchFilter.html">00648</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1LocalSearchFilter.html" title="Local Search Filters For fast neighbor pruning.">LocalSearchFilter</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1BaseObject.html" title="Useful Search and Modeling Objects.">BaseObject</a> {
<a name="l00649"></a>00649  <span class="keyword">public</span>:
<a name="l00650"></a>00650   <span class="comment">// Accepts a "delta" given the assignment with which the filter has been</span>
<a name="l00651"></a>00651   <span class="comment">// synchronized; the delta holds the variables which have been modified and</span>
<a name="l00652"></a>00652   <span class="comment">// their new value.</span>
<a name="l00653"></a>00653   <span class="comment">// Sample: supposing one wants to maintain a[0,1] + b[0,1] &lt;= 1,</span>
<a name="l00654"></a>00654   <span class="comment">// for the assignment (a,1), (b,0), the delta (b,1) will be rejected</span>
<a name="l00655"></a>00655   <span class="comment">// but the delta (a,0) will be accepted.</span>
<a name="l00656"></a>00656   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1LocalSearchFilter.html#50fa8e9ba16ba0dcd2f9748afeebdb98" title="Accepts a &amp;quot;delta&amp;quot; given the assignment with which the filter has been synchronized;...">Accept</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* delta,
<a name="l00657"></a>00657                       <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* deltadelta) = 0;
<a name="l00658"></a>00658 
<a name="l00659"></a>00659   <span class="comment">// Synchronizes the filter with the current solution</span>
<a name="l00660"></a>00660   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1LocalSearchFilter.html#3917c647740cd170ffd44e9dd164daea" title="Synchronizes the filter with the current solution.">Synchronize</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* assignment) = 0;
<a name="l00661"></a><a class="code" href="classoperations__research_1_1LocalSearchFilter.html#4b420fac36fbd326a81bb13a2962b2b6">00661</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1LocalSearchFilter.html#4b420fac36fbd326a81bb13a2962b2b6">IsIncremental</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00662"></a>00662 };
<a name="l00663"></a>00663 
<a name="l00664"></a>00664 <span class="comment">// ----- IntVarLocalSearchFilter -----</span>
<a name="l00665"></a>00665 
<a name="l00666"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html">00666</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html" title="IntVarLocalSearchFilter.">IntVarLocalSearchFilter</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1LocalSearchFilter.html" title="Local Search Filters For fast neighbor pruning.">LocalSearchFilter</a> {
<a name="l00667"></a>00667  <span class="keyword">public</span>:
<a name="l00668"></a>00668   <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#af1e5c44d3d9f6b731f43da10d6426a3" title="IntVarLocalSearchFilter.">IntVarLocalSearchFilter</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars, <span class="keywordtype">int</span> size);
<a name="l00669"></a>00669   <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#e955420754d0a4c2d8ca8c4b687b44a9">~IntVarLocalSearchFilter</a>();
<a name="l00670"></a>00670  <span class="keyword">protected</span>:
<a name="l00671"></a>00671   <span class="comment">// Add variables to "track" to the filter.</span>
<a name="l00672"></a>00672   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#c3e448ecea08986763169e2a517108fb" title="Add variables to &amp;quot;track&amp;quot; to the filter.">AddVars</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars, <span class="keywordtype">int</span> size);
<a name="l00673"></a>00673   <span class="comment">// This method should not be overridden. Override OnSynchronize() instead</span>
<a name="l00674"></a>00674   <span class="comment">// which is called before exiting this method.</span>
<a name="l00675"></a>00675   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#d6193dcb2fc37f0ff372b9282c112963" title="This method should not be overridden.">Synchronize</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* assignment);
<a name="l00676"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#310b8454d7c49178eb14a3d6cde55b4f">00676</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#310b8454d7c49178eb14a3d6cde55b4f">OnSynchronize</a>() {}
<a name="l00677"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#ef04544e0f3d9362ef73a027aa733553">00677</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#ef04544e0f3d9362ef73a027aa733553">FindIndex</a>(<span class="keyword">const</span> <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> var, int64* index)<span class="keyword"> const </span>{
<a name="l00678"></a>00678     DCHECK(index != NULL);
<a name="l00679"></a>00679     <span class="keywordflow">return</span> FindCopy(<a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#179d3f975954b163daf0373899175e07">var_to_index_</a>, var, index);
<a name="l00680"></a>00680   }
<a name="l00681"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#9045a67d0d2cf4daa65b2a12cb8ed6e8">00681</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#9045a67d0d2cf4daa65b2a12cb8ed6e8">Size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#543e651cee86629961767e3649f2e8ed">size_</a>; }
<a name="l00682"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#521ec3db6e1d61bf5699dcb8193d4de4">00682</a>   <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#521ec3db6e1d61bf5699dcb8193d4de4">Var</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#cfc774aed134d103bd5c18d60c0d8b92">vars_</a>[index]; }
<a name="l00683"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#f5bf4ae1c58402bd4443ee00f53492cc">00683</a>   int64 <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#f5bf4ae1c58402bd4443ee00f53492cc">Value</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#2634b86fe2a60b5b586ac48f3b8799e7">values_</a>[index]; }
<a name="l00684"></a>00684  <span class="keyword">private</span>:
<a name="l00685"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#cfc774aed134d103bd5c18d60c0d8b92">00685</a>   scoped_array&lt;IntVar*&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#cfc774aed134d103bd5c18d60c0d8b92">vars_</a>;
<a name="l00686"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#2634b86fe2a60b5b586ac48f3b8799e7">00686</a>   scoped_array&lt;int64&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#2634b86fe2a60b5b586ac48f3b8799e7">values_</a>;
<a name="l00687"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#543e651cee86629961767e3649f2e8ed">00687</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#543e651cee86629961767e3649f2e8ed">size_</a>;
<a name="l00688"></a><a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#179d3f975954b163daf0373899175e07">00688</a>   hash_map&lt;const IntVar*, int64&gt; <a class="code" href="classoperations__research_1_1IntVarLocalSearchFilter.html#179d3f975954b163daf0373899175e07">var_to_index_</a>;
<a name="l00689"></a>00689 };
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 <span class="comment">// ----- Local search decision builder -----</span>
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 <span class="comment">// Given a first solution (resulting from either an initial assignment or the</span>
<a name="l00694"></a>00694 <span class="comment">// result of a decision builder), it searches for neighbors using a local</span>
<a name="l00695"></a>00695 <span class="comment">// search operator. The first solution corresponds to the first leaf of the</span>
<a name="l00696"></a>00696 <span class="comment">// search.</span>
<a name="l00697"></a>00697 <span class="comment">// The local search applies to the variables contained either in the assignment</span>
<a name="l00698"></a>00698 <span class="comment">// or the vector of variables passed.</span>
<a name="l00699"></a>00699 
<a name="l00700"></a><a class="code" href="classoperations__research_1_1LocalSearch.html">00700</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1LocalSearch.html" title="Local search decision builder.">LocalSearch</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a> {
<a name="l00701"></a>00701  <span class="keyword">public</span>:
<a name="l00702"></a>00702   <a class="code" href="classoperations__research_1_1LocalSearch.html#4344f743cb2b95a637b34a09b888b799" title="Local search decision builder.">LocalSearch</a>(<a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* <span class="keyword">const</span> assignment,
<a name="l00703"></a>00703               <a class="code" href="classoperations__research_1_1SolutionPool.html" title="SolutionPool.">SolutionPool</a>* <span class="keyword">const</span> pool,
<a name="l00704"></a>00704               <a class="code" href="classoperations__research_1_1LocalSearchOperator.html" title="Local search operators.">LocalSearchOperator</a>* <span class="keyword">const</span> ls_operator,
<a name="l00705"></a>00705               <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> sub_decision_builder,
<a name="l00706"></a>00706               <a class="code" href="classoperations__research_1_1SearchLimit.html" title="Search Limits.">SearchLimit</a>* <span class="keyword">const</span> limit,
<a name="l00707"></a>00707               <span class="keyword">const</span> vector&lt;LocalSearchFilter*&gt;&amp; filters);
<a name="l00708"></a>00708   <span class="comment">// TODO(user): find a way to not have to pass vars here: redundant with</span>
<a name="l00709"></a>00709   <span class="comment">// variables in operators</span>
<a name="l00710"></a>00710   <a class="code" href="classoperations__research_1_1LocalSearch.html#4344f743cb2b95a637b34a09b888b799" title="Local search decision builder.">LocalSearch</a>(<a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span>* vars,
<a name="l00711"></a>00711               <span class="keywordtype">int</span> size,
<a name="l00712"></a>00712               <a class="code" href="classoperations__research_1_1SolutionPool.html" title="SolutionPool.">SolutionPool</a>* <span class="keyword">const</span> pool,
<a name="l00713"></a>00713               <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> first_solution,
<a name="l00714"></a>00714               <a class="code" href="classoperations__research_1_1LocalSearchOperator.html" title="Local search operators.">LocalSearchOperator</a>* <span class="keyword">const</span> ls_operator,
<a name="l00715"></a>00715               <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> sub_decision_builder,
<a name="l00716"></a>00716               <a class="code" href="classoperations__research_1_1SearchLimit.html" title="Search Limits.">SearchLimit</a>* <span class="keyword">const</span> limit,
<a name="l00717"></a>00717               <span class="keyword">const</span> vector&lt;LocalSearchFilter*&gt;&amp; filters);
<a name="l00718"></a>00718   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#b52a1cd749b1212614956035c96b8af7">~LocalSearch</a>();
<a name="l00719"></a>00719   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <a class="code" href="classoperations__research_1_1LocalSearch.html#ab1cf353f65d7b67f7c8aaa86aeac3b7" title="This is equivalent to a multi-restart decision builder.">Next</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> solver);
<a name="l00720"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#62ddb65146d0502f15e4efc162725cf3">00720</a>   <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#62ddb65146d0502f15e4efc162725cf3">DebugString</a>()<span class="keyword"> const </span>{
<a name="l00721"></a>00721     <span class="keywordflow">return</span> <span class="stringliteral">"LocalSearch"</span>;
<a name="l00722"></a>00722   }
<a name="l00723"></a>00723  <span class="keyword">protected</span>:
<a name="l00724"></a>00724   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#3114a627d3fe411054b60d13eec14967">PushFirstSolutionDecision</a>(<a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* first_solution);
<a name="l00725"></a>00725   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#ccc804249b8986be5e855c76a7c322e0">PushLocalSearchDecision</a>();
<a name="l00726"></a>00726  <span class="keyword">private</span>:
<a name="l00727"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#244aee7bb6871ec022f7139ded2da515">00727</a>   <a class="code" href="classoperations__research_1_1Assignment.html" title="Assignment.">Assignment</a>* <a class="code" href="classoperations__research_1_1LocalSearch.html#244aee7bb6871ec022f7139ded2da515">assignment_</a>;
<a name="l00728"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#543cf904f92d32e217a5ba45984fdced">00728</a>   <a class="code" href="classoperations__research_1_1SolutionPool.html" title="SolutionPool.">SolutionPool</a>* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#543cf904f92d32e217a5ba45984fdced">pool_</a>;
<a name="l00729"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#fee56ffd8fc62469960416dce0746434">00729</a>   <a class="code" href="classoperations__research_1_1LocalSearchOperator.html" title="Local search operators.">LocalSearchOperator</a>* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#fee56ffd8fc62469960416dce0746434">ls_operator_</a>;
<a name="l00730"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#6924cd6945b991d6d6f5f8a7ff2e8b63">00730</a>   <a class="code" href="classoperations__research_1_1DecisionBuilder.html" title="A DecisionBuilder is responsible for creating the search tree.">DecisionBuilder</a>* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#6924cd6945b991d6d6f5f8a7ff2e8b63">sub_decision_builder_</a>;
<a name="l00731"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#82a476d29f8597bda4d29c6c38125e67">00731</a>   vector&lt;NestedSolveDecision*&gt; <a class="code" href="classoperations__research_1_1LocalSearch.html#82a476d29f8597bda4d29c6c38125e67">nested_decisions_</a>;
<a name="l00732"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#6f98725fe9ee5f28558ca25b56028ac4">00732</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#6f98725fe9ee5f28558ca25b56028ac4">nested_decision_index_</a>;
<a name="l00733"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#ad4394c45797bca7851be342b9393353">00733</a>   <a class="code" href="classoperations__research_1_1SearchLimit.html" title="Search Limits.">SearchLimit</a>* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#ad4394c45797bca7851be342b9393353">limit_</a>;
<a name="l00734"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#588962a8530696190f782a100ec8b4bc">00734</a>   <span class="keyword">const</span> vector&lt;LocalSearchFilter*&gt; <a class="code" href="classoperations__research_1_1LocalSearch.html#588962a8530696190f782a100ec8b4bc">filters_</a>;
<a name="l00735"></a><a class="code" href="classoperations__research_1_1LocalSearch.html#ee815ff7f0a9552f31d125a9d2d4c977">00735</a>   <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1LocalSearch.html#ee815ff7f0a9552f31d125a9d2d4c977">has_started_</a>;
<a name="l00736"></a>00736 };
<a name="l00737"></a>00737 
<a name="l00738"></a>00738 <span class="comment">// ---------- SymmetryBreaker ----------</span>
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="keyword">class </span><a class="code" href="classoperations__research_1_1SymmetryManager.html" title="Symmetry Breaking.">SymmetryManager</a>;
<a name="l00741"></a>00741 
<a name="l00742"></a><a class="code" href="classoperations__research_1_1SymmetryBreaker.html">00742</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1SymmetryBreaker.html">SymmetryBreaker</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1DecisionVisitor.html" title="A DecisionVisitor is used to inspect a decision.">DecisionVisitor</a> {
<a name="l00743"></a>00743  <span class="keyword">public</span>:
<a name="l00744"></a><a class="code" href="classoperations__research_1_1SymmetryBreaker.html#9a170caed81ab593c4078b94c0eb6f48">00744</a>   <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#9a170caed81ab593c4078b94c0eb6f48">SymmetryBreaker</a>() : <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#6d504ae4961d8ed8fd5d30fa14c3797a">symmetry_manager_</a>(NULL) {}
<a name="l00745"></a><a class="code" href="classoperations__research_1_1SymmetryBreaker.html#f1fb567ef30ed5ec315e77f4cdca3679">00745</a>   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#f1fb567ef30ed5ec315e77f4cdca3679">~SymmetryBreaker</a>() {}
<a name="l00746"></a>00746 
<a name="l00747"></a><a class="code" href="classoperations__research_1_1SymmetryBreaker.html#99c8a52d3b726eb0026dd27accdc3345">00747</a>   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#99c8a52d3b726eb0026dd27accdc3345">set_symmetry_manager</a>(<a class="code" href="classoperations__research_1_1SymmetryManager.html" title="Symmetry Breaking.">SymmetryManager</a>* manager) {
<a name="l00748"></a>00748     <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#6d504ae4961d8ed8fd5d30fa14c3797a">symmetry_manager_</a> = manager;
<a name="l00749"></a>00749   }
<a name="l00750"></a><a class="code" href="classoperations__research_1_1SymmetryBreaker.html#8cfe3abd7dea3e7f95d74ed54008e6dd">00750</a>   <a class="code" href="classoperations__research_1_1SymmetryManager.html" title="Symmetry Breaking.">SymmetryManager</a>* <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#8cfe3abd7dea3e7f95d74ed54008e6dd">symmetry_manager</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#6d504ae4961d8ed8fd5d30fa14c3797a">symmetry_manager_</a>; }
<a name="l00751"></a>00751   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#2d105ff960b3396b26a8de56a3b49e44">AddToClause</a>(<a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* term);
<a name="l00752"></a>00752  <span class="keyword">private</span>:
<a name="l00753"></a><a class="code" href="classoperations__research_1_1SymmetryBreaker.html#6d504ae4961d8ed8fd5d30fa14c3797a">00753</a>   <a class="code" href="classoperations__research_1_1SymmetryManager.html" title="Symmetry Breaking.">SymmetryManager</a>* <a class="code" href="classoperations__research_1_1SymmetryBreaker.html#6d504ae4961d8ed8fd5d30fa14c3797a">symmetry_manager_</a>;
<a name="l00754"></a>00754 };
<a name="l00755"></a>00755 
<a name="l00756"></a>00756 <span class="comment">// ---------- Search Log ---------</span>
<a name="l00757"></a>00757 
<a name="l00758"></a><a class="code" href="classoperations__research_1_1SearchLog.html">00758</a> <span class="keyword">class </span><a class="code" href="classoperations__research_1_1SearchLog.html" title="Search Log.">SearchLog</a> : <span class="keyword">public</span> <a class="code" href="classoperations__research_1_1SearchMonitor.html" title="A search monitor is a simple set of callbacks to monitor all search events.">SearchMonitor</a> {
<a name="l00759"></a>00759  <span class="keyword">public</span>:
<a name="l00760"></a>00760   <a class="code" href="classoperations__research_1_1SearchLog.html#94e4a2330724834502684abaab896111" title="Search Log.">SearchLog</a>(<a class="code" href="classoperations__research_1_1Solver.html" title="Solver Class.">Solver</a>* <span class="keyword">const</span> s,
<a name="l00761"></a>00761             <a class="code" href="classoperations__research_1_1OptimizeVar.html" title="This class encapsulate an objective.">OptimizeVar</a>* <span class="keyword">const</span> obj,
<a name="l00762"></a>00762             <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> var,
<a name="l00763"></a>00763             ResultCallback&lt;string&gt;* display_callback,
<a name="l00764"></a>00764             <span class="keywordtype">int</span> period);
<a name="l00765"></a>00765   <span class="keyword">virtual</span> <a class="code" href="classoperations__research_1_1SearchLog.html#a02a1379b698858705cc39fe7de9f76d">~SearchLog</a>();
<a name="l00766"></a>00766   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#7abdb38d45920c769c1df70fdbfbbd4d" title="Beginning of the search.">EnterSearch</a>();
<a name="l00767"></a>00767   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#b22c02947c720ede439a2643b76be94f" title="End of the search.">ExitSearch</a>();
<a name="l00768"></a>00768   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classoperations__research_1_1SearchLog.html#760d401b905e1a6dad762a496ddf1a08" title="This method is called when a valid solution is found.">AtSolution</a>();
<a name="l00769"></a>00769   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#59cdb6933d5927975af3489fd3fa7e70" title="Just when the failure occurs.">BeginFail</a>();
<a name="l00770"></a>00770   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#82244b2e5f4f5faabb48ca2aba9e910f" title="When the search tree is finished.">NoMoreSolutions</a>();
<a name="l00771"></a>00771   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#27469087492badd68d1c493959fee2a2" title="Before applying the decision.">ApplyDecision</a>(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> decision);
<a name="l00772"></a>00772   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#10d970f41bee18dd42b9510ca422a07b" title="Before refuting the Decision.">RefuteDecision</a>(<a class="code" href="classoperations__research_1_1Decision.html" title="A Decision represents a choice point in the search tree.">Decision</a>* <span class="keyword">const</span> decision);
<a name="l00773"></a>00773   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#3552cd62545e80d0ca632ac31911d0d1">OutputDecision</a>();
<a name="l00774"></a>00774   <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#fc544b08813308dcf1652885f7ad6dac">Maintain</a>();
<a name="l00775"></a>00775   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#18f4b4eaa43bd08d806a698fcd3d3e0c" title="Before the initial propagation.">BeginInitialPropagation</a>();
<a name="l00776"></a>00776   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#51ca06faa0bca3393b596fcca33e3656" title="After the initial propagation.">EndInitialPropagation</a>();
<a name="l00777"></a>00777  <span class="keyword">protected</span>:
<a name="l00778"></a>00778   <span class="comment">/* Bottleneck function used for all UI related output. */</span>
<a name="l00779"></a>00779   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoperations__research_1_1SearchLog.html#e70fca486fff2316fb1ca1a3543c3e66" title="Bottleneck function used for all UI related output.">OutputLine</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; line);
<a name="l00780"></a>00780  <span class="keyword">private</span>:
<a name="l00781"></a>00781   <span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code" href="classoperations__research_1_1SearchLog.html#519d4c301e0a0e3749a54dac451efbdf">MemoryUsage</a>();
<a name="l00782"></a>00782 
<a name="l00783"></a><a class="code" href="classoperations__research_1_1SearchLog.html#01da2467d170be411f3d558eb3cc4d1e">00783</a>   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SearchLog.html#01da2467d170be411f3d558eb3cc4d1e">period_</a>;
<a name="l00784"></a><a class="code" href="classoperations__research_1_1SearchLog.html#0eccdb7ce8d070a6922fe7b142241153">00784</a>   scoped_ptr&lt;WallTimer&gt; <a class="code" href="classoperations__research_1_1SearchLog.html#0eccdb7ce8d070a6922fe7b142241153">timer_</a>;
<a name="l00785"></a><a class="code" href="classoperations__research_1_1SearchLog.html#bc906a1b01826e8fbc22598642142e67">00785</a>   <a class="code" href="classoperations__research_1_1IntVar.html" title="The class IntVar is a subset of IntExpr.">IntVar</a>* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1SearchLog.html#bc906a1b01826e8fbc22598642142e67">var_</a>;
<a name="l00786"></a><a class="code" href="classoperations__research_1_1SearchLog.html#dc2fc7ccf509037e07d61a0b42613d15">00786</a>   <a class="code" href="classoperations__research_1_1OptimizeVar.html" title="This class encapsulate an objective.">OptimizeVar</a>* <span class="keyword">const</span> <a class="code" href="classoperations__research_1_1SearchLog.html#dc2fc7ccf509037e07d61a0b42613d15">obj_</a>;
<a name="l00787"></a><a class="code" href="classoperations__research_1_1SearchLog.html#a07a0d94d721292818f2fb87aa753eba">00787</a>   scoped_ptr&lt;ResultCallback&lt;string&gt; &gt; <a class="code" href="classoperations__research_1_1SearchLog.html#a07a0d94d721292818f2fb87aa753eba">display_callback_</a>;
<a name="l00788"></a><a class="code" href="classoperations__research_1_1SearchLog.html#15211749b3afa1c4d555e8672ab0bed8">00788</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SearchLog.html#15211749b3afa1c4d555e8672ab0bed8">nsol_</a>;
<a name="l00789"></a><a class="code" href="classoperations__research_1_1SearchLog.html#464058f9e6511b9b098617231e9321fe">00789</a>   int64 <a class="code" href="classoperations__research_1_1SearchLog.html#464058f9e6511b9b098617231e9321fe">tick_</a>;
<a name="l00790"></a><a class="code" href="classoperations__research_1_1SearchLog.html#fbee03613bcbd42d61e392ba7b0a2e63">00790</a>   int64 <a class="code" href="classoperations__research_1_1SearchLog.html#fbee03613bcbd42d61e392ba7b0a2e63">objective_min_</a>;
<a name="l00791"></a><a class="code" href="classoperations__research_1_1SearchLog.html#909bba67757a48271a6eb32354f3dc60">00791</a>   int64 <a class="code" href="classoperations__research_1_1SearchLog.html#909bba67757a48271a6eb32354f3dc60">objective_max_</a>;
<a name="l00792"></a><a class="code" href="classoperations__research_1_1SearchLog.html#402e6e63988359df01ded65a3ba24bf7">00792</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SearchLog.html#402e6e63988359df01ded65a3ba24bf7">min_right_depth_</a>;
<a name="l00793"></a><a class="code" href="classoperations__research_1_1SearchLog.html#4c5da5425c91ddee2d64f526884c6462">00793</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SearchLog.html#4c5da5425c91ddee2d64f526884c6462">max_depth_</a>;
<a name="l00794"></a><a class="code" href="classoperations__research_1_1SearchLog.html#5fb1c46ece3164c203b0ca2b8bd74ea6">00794</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SearchLog.html#5fb1c46ece3164c203b0ca2b8bd74ea6">sliding_min_depth_</a>;
<a name="l00795"></a><a class="code" href="classoperations__research_1_1SearchLog.html#8ca99d1883a59c3e4db51d81b28862dc">00795</a>   <span class="keywordtype">int</span> <a class="code" href="classoperations__research_1_1SearchLog.html#8ca99d1883a59c3e4db51d81b28862dc">sliding_max_depth_</a>;
<a name="l00796"></a>00796 };
<a name="l00797"></a>00797 }  <span class="comment">// namespace operations_research</span>
<a name="l00798"></a>00798 
<a name="l00799"></a>00799 <span class="preprocessor">#endif  // CONSTRAINT_SOLVER_CONSTRAINT_SOLVERI_H_</span>
</pre></div></div>

  <!-- Start of footer. -->
  <table width=100% cellpadding=0 cellspacing=0 border=0>
    <tr valign=top>
      <td colspan=2 height=10></td>
    </tr>
    <tr valign=top>
      <td colspan=2 bgcolor=#389613 height=3></td>
    </tr>
  </table>

  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <br /><br />

  
  </body>
</html>
